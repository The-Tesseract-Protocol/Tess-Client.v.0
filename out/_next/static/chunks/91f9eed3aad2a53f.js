(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,61280,(e,t,r)=>{!function(e){"use strict";var t,r=function(e){var t,r=new Float64Array(16);if(e)for(t=0;t<e.length;t++)r[t]=e[t];return r},s=function(){throw Error("no PRNG")},a=new Uint8Array(16),n=new Uint8Array(32);n[0]=9;var i=r(),o=r([1]),l=r([56129,1]),c=r([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),d=r([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),h=r([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),u=r([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),x=r([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function f(e,t,r,s){e[t]=r>>24&255,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r,e[t+4]=s>>24&255,e[t+5]=s>>16&255,e[t+6]=s>>8&255,e[t+7]=255&s}function p(e,t,r,s,a){var n,i=0;for(n=0;n<a;n++)i|=e[t+n]^r[s+n];return(1&i-1>>>8)-1}function b(e,t,r,s){return p(e,t,r,s,16)}function m(e,t,r,s){return p(e,t,r,s,32)}function y(e,t,r,s){!function(e,t,r,s){for(var a,n=255&s[0]|(255&s[1])<<8|(255&s[2])<<16|(255&s[3])<<24,i=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,o=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,l=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,c=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,d=255&s[4]|(255&s[5])<<8|(255&s[6])<<16|(255&s[7])<<24,h=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,u=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,x=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,f=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,p=255&s[8]|(255&s[9])<<8|(255&s[10])<<16|(255&s[11])<<24,b=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,m=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,y=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,w=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,g=255&s[12]|(255&s[13])<<8|(255&s[14])<<16|(255&s[15])<<24,v=n,j=i,N=o,k=l,S=c,A=d,C=h,E=u,_=x,L=f,U=p,P=b,R=m,T=y,M=w,I=g,B=0;B<20;B+=2)S^=(a=v+R|0)<<7|a>>>25,_^=(a=S+v|0)<<9|a>>>23,R^=(a=_+S|0)<<13|a>>>19,v^=(a=R+_|0)<<18|a>>>14,L^=(a=A+j|0)<<7|a>>>25,T^=(a=L+A|0)<<9|a>>>23,j^=(a=T+L|0)<<13|a>>>19,A^=(a=j+T|0)<<18|a>>>14,M^=(a=U+C|0)<<7|a>>>25,N^=(a=M+U|0)<<9|a>>>23,C^=(a=N+M|0)<<13|a>>>19,U^=(a=C+N|0)<<18|a>>>14,k^=(a=I+P|0)<<7|a>>>25,E^=(a=k+I|0)<<9|a>>>23,P^=(a=E+k|0)<<13|a>>>19,I^=(a=P+E|0)<<18|a>>>14,j^=(a=v+k|0)<<7|a>>>25,N^=(a=j+v|0)<<9|a>>>23,k^=(a=N+j|0)<<13|a>>>19,v^=(a=k+N|0)<<18|a>>>14,C^=(a=A+S|0)<<7|a>>>25,E^=(a=C+A|0)<<9|a>>>23,S^=(a=E+C|0)<<13|a>>>19,A^=(a=S+E|0)<<18|a>>>14,P^=(a=U+L|0)<<7|a>>>25,_^=(a=P+U|0)<<9|a>>>23,L^=(a=_+P|0)<<13|a>>>19,U^=(a=L+_|0)<<18|a>>>14,R^=(a=I+M|0)<<7|a>>>25,T^=(a=R+I|0)<<9|a>>>23,M^=(a=T+R|0)<<13|a>>>19,I^=(a=M+T|0)<<18|a>>>14;v=v+n|0,j=j+i|0,N=N+o|0,k=k+l|0,S=S+c|0,A=A+d|0,C=C+h|0,E=E+u|0,_=_+x|0,L=L+f|0,U=U+p|0,P=P+b|0,R=R+m|0,T=T+y|0,M=M+w|0,I=I+g|0,e[0]=v>>>0&255,e[1]=v>>>8&255,e[2]=v>>>16&255,e[3]=v>>>24&255,e[4]=j>>>0&255,e[5]=j>>>8&255,e[6]=j>>>16&255,e[7]=j>>>24&255,e[8]=N>>>0&255,e[9]=N>>>8&255,e[10]=N>>>16&255,e[11]=N>>>24&255,e[12]=k>>>0&255,e[13]=k>>>8&255,e[14]=k>>>16&255,e[15]=k>>>24&255,e[16]=S>>>0&255,e[17]=S>>>8&255,e[18]=S>>>16&255,e[19]=S>>>24&255,e[20]=A>>>0&255,e[21]=A>>>8&255,e[22]=A>>>16&255,e[23]=A>>>24&255,e[24]=C>>>0&255,e[25]=C>>>8&255,e[26]=C>>>16&255,e[27]=C>>>24&255,e[28]=E>>>0&255,e[29]=E>>>8&255,e[30]=E>>>16&255,e[31]=E>>>24&255,e[32]=_>>>0&255,e[33]=_>>>8&255,e[34]=_>>>16&255,e[35]=_>>>24&255,e[36]=L>>>0&255,e[37]=L>>>8&255,e[38]=L>>>16&255,e[39]=L>>>24&255,e[40]=U>>>0&255,e[41]=U>>>8&255,e[42]=U>>>16&255,e[43]=U>>>24&255,e[44]=P>>>0&255,e[45]=P>>>8&255,e[46]=P>>>16&255,e[47]=P>>>24&255,e[48]=R>>>0&255,e[49]=R>>>8&255,e[50]=R>>>16&255,e[51]=R>>>24&255,e[52]=T>>>0&255,e[53]=T>>>8&255,e[54]=T>>>16&255,e[55]=T>>>24&255,e[56]=M>>>0&255,e[57]=M>>>8&255,e[58]=M>>>16&255,e[59]=M>>>24&255,e[60]=I>>>0&255,e[61]=I>>>8&255,e[62]=I>>>16&255,e[63]=I>>>24&255}(e,t,r,s)}function w(e,t,r,s){!function(e,t,r,s){for(var a,n=255&s[0]|(255&s[1])<<8|(255&s[2])<<16|(255&s[3])<<24,i=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,o=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,l=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,c=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,d=255&s[4]|(255&s[5])<<8|(255&s[6])<<16|(255&s[7])<<24,h=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,u=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,x=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,f=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,p=255&s[8]|(255&s[9])<<8|(255&s[10])<<16|(255&s[11])<<24,b=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,m=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,y=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,w=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,g=255&s[12]|(255&s[13])<<8|(255&s[14])<<16|(255&s[15])<<24,v=n,j=i,N=o,k=l,S=c,A=d,C=h,E=u,_=x,L=f,U=p,P=b,R=m,T=y,M=w,I=g,B=0;B<20;B+=2)S^=(a=v+R|0)<<7|a>>>25,_^=(a=S+v|0)<<9|a>>>23,R^=(a=_+S|0)<<13|a>>>19,v^=(a=R+_|0)<<18|a>>>14,L^=(a=A+j|0)<<7|a>>>25,T^=(a=L+A|0)<<9|a>>>23,j^=(a=T+L|0)<<13|a>>>19,A^=(a=j+T|0)<<18|a>>>14,M^=(a=U+C|0)<<7|a>>>25,N^=(a=M+U|0)<<9|a>>>23,C^=(a=N+M|0)<<13|a>>>19,U^=(a=C+N|0)<<18|a>>>14,k^=(a=I+P|0)<<7|a>>>25,E^=(a=k+I|0)<<9|a>>>23,P^=(a=E+k|0)<<13|a>>>19,I^=(a=P+E|0)<<18|a>>>14,j^=(a=v+k|0)<<7|a>>>25,N^=(a=j+v|0)<<9|a>>>23,k^=(a=N+j|0)<<13|a>>>19,v^=(a=k+N|0)<<18|a>>>14,C^=(a=A+S|0)<<7|a>>>25,E^=(a=C+A|0)<<9|a>>>23,S^=(a=E+C|0)<<13|a>>>19,A^=(a=S+E|0)<<18|a>>>14,P^=(a=U+L|0)<<7|a>>>25,_^=(a=P+U|0)<<9|a>>>23,L^=(a=_+P|0)<<13|a>>>19,U^=(a=L+_|0)<<18|a>>>14,R^=(a=I+M|0)<<7|a>>>25,T^=(a=R+I|0)<<9|a>>>23,M^=(a=T+R|0)<<13|a>>>19,I^=(a=M+T|0)<<18|a>>>14;e[0]=v>>>0&255,e[1]=v>>>8&255,e[2]=v>>>16&255,e[3]=v>>>24&255,e[4]=A>>>0&255,e[5]=A>>>8&255,e[6]=A>>>16&255,e[7]=A>>>24&255,e[8]=U>>>0&255,e[9]=U>>>8&255,e[10]=U>>>16&255,e[11]=U>>>24&255,e[12]=I>>>0&255,e[13]=I>>>8&255,e[14]=I>>>16&255,e[15]=I>>>24&255,e[16]=C>>>0&255,e[17]=C>>>8&255,e[18]=C>>>16&255,e[19]=C>>>24&255,e[20]=E>>>0&255,e[21]=E>>>8&255,e[22]=E>>>16&255,e[23]=E>>>24&255,e[24]=_>>>0&255,e[25]=_>>>8&255,e[26]=_>>>16&255,e[27]=_>>>24&255,e[28]=L>>>0&255,e[29]=L>>>8&255,e[30]=L>>>16&255,e[31]=L>>>24&255}(e,t,r,s)}var g=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function v(e,t,r,s,a,n,i){var o,l,c=new Uint8Array(16),d=new Uint8Array(64);for(l=0;l<16;l++)c[l]=0;for(l=0;l<8;l++)c[l]=n[l];for(;a>=64;){for(y(d,c,i,g),l=0;l<64;l++)e[t+l]=r[s+l]^d[l];for(l=8,o=1;l<16;l++)o=o+(255&c[l])|0,c[l]=255&o,o>>>=8;a-=64,t+=64,s+=64}if(a>0)for(y(d,c,i,g),l=0;l<a;l++)e[t+l]=r[s+l]^d[l];return 0}function j(e,t,r,s,a){var n,i,o=new Uint8Array(16),l=new Uint8Array(64);for(i=0;i<16;i++)o[i]=0;for(i=0;i<8;i++)o[i]=s[i];for(;r>=64;){for(y(l,o,a,g),i=0;i<64;i++)e[t+i]=l[i];for(i=8,n=1;i<16;i++)n=n+(255&o[i])|0,o[i]=255&n,n>>>=8;r-=64,t+=64}if(r>0)for(y(l,o,a,g),i=0;i<r;i++)e[t+i]=l[i];return 0}function N(e,t,r,s,a){var n=new Uint8Array(32);w(n,s,a,g);for(var i=new Uint8Array(8),o=0;o<8;o++)i[o]=s[o+16];return j(e,t,r,i,n)}function k(e,t,r,s,a,n,i){var o=new Uint8Array(32);w(o,n,i,g);for(var l=new Uint8Array(8),c=0;c<8;c++)l[c]=n[c+16];return v(e,t,r,s,a,l,o)}var S=function(e){var t,r,s,a,n,i,o,l;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0,t=255&e[0]|(255&e[1])<<8,this.r[0]=8191&t,r=255&e[2]|(255&e[3])<<8,this.r[1]=(t>>>13|r<<3)&8191,s=255&e[4]|(255&e[5])<<8,this.r[2]=(r>>>10|s<<6)&7939,a=255&e[6]|(255&e[7])<<8,this.r[3]=(s>>>7|a<<9)&8191,n=255&e[8]|(255&e[9])<<8,this.r[4]=(a>>>4|n<<12)&255,this.r[5]=n>>>1&8190,i=255&e[10]|(255&e[11])<<8,this.r[6]=(n>>>14|i<<2)&8191,o=255&e[12]|(255&e[13])<<8,this.r[7]=(i>>>11|o<<5)&8065,l=255&e[14]|(255&e[15])<<8,this.r[8]=(o>>>8|l<<8)&8191,this.r[9]=l>>>5&127,this.pad[0]=255&e[16]|(255&e[17])<<8,this.pad[1]=255&e[18]|(255&e[19])<<8,this.pad[2]=255&e[20]|(255&e[21])<<8,this.pad[3]=255&e[22]|(255&e[23])<<8,this.pad[4]=255&e[24]|(255&e[25])<<8,this.pad[5]=255&e[26]|(255&e[27])<<8,this.pad[6]=255&e[28]|(255&e[29])<<8,this.pad[7]=255&e[30]|(255&e[31])<<8};function A(e,t,r,s,a,n){var i=new S(n);return i.update(r,s,a),i.finish(e,t),0}function C(e,t,r,s,a,n){var i=new Uint8Array(16);return A(i,0,r,s,a,n),b(e,t,i,0)}function E(e,t,r,s,a){var n;if(r<32)return -1;for(k(e,0,t,0,r,s,a),A(e,16,e,32,r-32,e),n=0;n<16;n++)e[n]=0;return 0}function _(e,t,r,s,a){var n,i=new Uint8Array(32);if(r<32||(N(i,0,32,s,a),0!==C(t,16,t,32,r-32,i)))return -1;for(k(e,0,t,0,r,s,a),n=0;n<32;n++)e[n]=0;return 0}function L(e,t){var r;for(r=0;r<16;r++)e[r]=0|t[r]}function U(e){var t,r,s=1;for(t=0;t<16;t++)s=Math.floor((r=e[t]+s+65535)/65536),e[t]=r-65536*s;e[0]+=s-1+37*(s-1)}function P(e,t,r){for(var s,a=~(r-1),n=0;n<16;n++)s=a&(e[n]^t[n]),e[n]^=s,t[n]^=s}function R(e,t){var s,a,n,i=r(),o=r();for(s=0;s<16;s++)o[s]=t[s];for(U(o),U(o),U(o),a=0;a<2;a++){for(s=1,i[0]=o[0]-65517;s<15;s++)i[s]=o[s]-65535-(i[s-1]>>16&1),i[s-1]&=65535;i[15]=o[15]-32767-(i[14]>>16&1),n=i[15]>>16&1,i[14]&=65535,P(o,i,1-n)}for(s=0;s<16;s++)e[2*s]=255&o[s],e[2*s+1]=o[s]>>8}function T(e,t){var r=new Uint8Array(32),s=new Uint8Array(32);return R(r,e),R(s,t),m(r,0,s,0)}function M(e){var t=new Uint8Array(32);return R(t,e),1&t[0]}function I(e,t){var r;for(r=0;r<16;r++)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767}function B(e,t,r){for(var s=0;s<16;s++)e[s]=t[s]+r[s]}function D(e,t,r){for(var s=0;s<16;s++)e[s]=t[s]-r[s]}function O(e,t,r){var s,a,n=0,i=0,o=0,l=0,c=0,d=0,h=0,u=0,x=0,f=0,p=0,b=0,m=0,y=0,w=0,g=0,v=0,j=0,N=0,k=0,S=0,A=0,C=0,E=0,_=0,L=0,U=0,P=0,R=0,T=0,M=0,I=r[0],B=r[1],D=r[2],O=r[3],W=r[4],K=r[5],H=r[6],$=r[7],Y=r[8],F=r[9],V=r[10],z=r[11],q=r[12],J=r[13],G=r[14],X=r[15];n+=(s=t[0])*I,i+=s*B,o+=s*D,l+=s*O,c+=s*W,d+=s*K,h+=s*H,u+=s*$,x+=s*Y,f+=s*F,p+=s*V,b+=s*z,m+=s*q,y+=s*J,w+=s*G,g+=s*X,i+=(s=t[1])*I,o+=s*B,l+=s*D,c+=s*O,d+=s*W,h+=s*K,u+=s*H,x+=s*$,f+=s*Y,p+=s*F,b+=s*V,m+=s*z,y+=s*q,w+=s*J,g+=s*G,v+=s*X,o+=(s=t[2])*I,l+=s*B,c+=s*D,d+=s*O,h+=s*W,u+=s*K,x+=s*H,f+=s*$,p+=s*Y,b+=s*F,m+=s*V,y+=s*z,w+=s*q,g+=s*J,v+=s*G,j+=s*X,l+=(s=t[3])*I,c+=s*B,d+=s*D,h+=s*O,u+=s*W,x+=s*K,f+=s*H,p+=s*$,b+=s*Y,m+=s*F,y+=s*V,w+=s*z,g+=s*q,v+=s*J,j+=s*G,N+=s*X,c+=(s=t[4])*I,d+=s*B,h+=s*D,u+=s*O,x+=s*W,f+=s*K,p+=s*H,b+=s*$,m+=s*Y,y+=s*F,w+=s*V,g+=s*z,v+=s*q,j+=s*J,N+=s*G,k+=s*X,d+=(s=t[5])*I,h+=s*B,u+=s*D,x+=s*O,f+=s*W,p+=s*K,b+=s*H,m+=s*$,y+=s*Y,w+=s*F,g+=s*V,v+=s*z,j+=s*q,N+=s*J,k+=s*G,S+=s*X,h+=(s=t[6])*I,u+=s*B,x+=s*D,f+=s*O,p+=s*W,b+=s*K,m+=s*H,y+=s*$,w+=s*Y,g+=s*F,v+=s*V,j+=s*z,N+=s*q,k+=s*J,S+=s*G,A+=s*X,u+=(s=t[7])*I,x+=s*B,f+=s*D,p+=s*O,b+=s*W,m+=s*K,y+=s*H,w+=s*$,g+=s*Y,v+=s*F,j+=s*V,N+=s*z,k+=s*q,S+=s*J,A+=s*G,C+=s*X,x+=(s=t[8])*I,f+=s*B,p+=s*D,b+=s*O,m+=s*W,y+=s*K,w+=s*H,g+=s*$,v+=s*Y,j+=s*F,N+=s*V,k+=s*z,S+=s*q,A+=s*J,C+=s*G,E+=s*X,f+=(s=t[9])*I,p+=s*B,b+=s*D,m+=s*O,y+=s*W,w+=s*K,g+=s*H,v+=s*$,j+=s*Y,N+=s*F,k+=s*V,S+=s*z,A+=s*q,C+=s*J,E+=s*G,_+=s*X,p+=(s=t[10])*I,b+=s*B,m+=s*D,y+=s*O,w+=s*W,g+=s*K,v+=s*H,j+=s*$,N+=s*Y,k+=s*F,S+=s*V,A+=s*z,C+=s*q,E+=s*J,_+=s*G,L+=s*X,b+=(s=t[11])*I,m+=s*B,y+=s*D,w+=s*O,g+=s*W,v+=s*K,j+=s*H,N+=s*$,k+=s*Y,S+=s*F,A+=s*V,C+=s*z,E+=s*q,_+=s*J,L+=s*G,U+=s*X,m+=(s=t[12])*I,y+=s*B,w+=s*D,g+=s*O,v+=s*W,j+=s*K,N+=s*H,k+=s*$,S+=s*Y,A+=s*F,C+=s*V,E+=s*z,_+=s*q,L+=s*J,U+=s*G,P+=s*X,y+=(s=t[13])*I,w+=s*B,g+=s*D,v+=s*O,j+=s*W,N+=s*K,k+=s*H,S+=s*$,A+=s*Y,C+=s*F,E+=s*V,_+=s*z,L+=s*q,U+=s*J,P+=s*G,R+=s*X,w+=(s=t[14])*I,g+=s*B,v+=s*D,j+=s*O,N+=s*W,k+=s*K,S+=s*H,A+=s*$,C+=s*Y,E+=s*F,_+=s*V,L+=s*z,U+=s*q,P+=s*J,R+=s*G,T+=s*X,g+=(s=t[15])*I,v+=s*B,j+=s*D,N+=s*O,k+=s*W,S+=s*K,A+=s*H,C+=s*$,E+=s*Y,_+=s*F,L+=s*V,U+=s*z,P+=s*q,R+=s*J,T+=s*G,M+=s*X,n+=38*v,i+=38*j,o+=38*N,l+=38*k,c+=38*S,d+=38*A,h+=38*C,u+=38*E,x+=38*_,f+=38*L,p+=38*U,b+=38*P,m+=38*R,y+=38*T,w+=38*M,a=Math.floor((s=n+(a=1)+65535)/65536),n=s-65536*a,a=Math.floor((s=i+a+65535)/65536),i=s-65536*a,a=Math.floor((s=o+a+65535)/65536),o=s-65536*a,a=Math.floor((s=l+a+65535)/65536),l=s-65536*a,a=Math.floor((s=c+a+65535)/65536),c=s-65536*a,a=Math.floor((s=d+a+65535)/65536),d=s-65536*a,a=Math.floor((s=h+a+65535)/65536),h=s-65536*a,a=Math.floor((s=u+a+65535)/65536),u=s-65536*a,a=Math.floor((s=x+a+65535)/65536),x=s-65536*a,a=Math.floor((s=f+a+65535)/65536),f=s-65536*a,a=Math.floor((s=p+a+65535)/65536),p=s-65536*a,a=Math.floor((s=b+a+65535)/65536),b=s-65536*a,a=Math.floor((s=m+a+65535)/65536),m=s-65536*a,a=Math.floor((s=y+a+65535)/65536),y=s-65536*a,a=Math.floor((s=w+a+65535)/65536),w=s-65536*a,a=Math.floor((s=g+a+65535)/65536),g=s-65536*a,n+=a-1+37*(a-1),a=Math.floor((s=n+(a=1)+65535)/65536),n=s-65536*a,a=Math.floor((s=i+a+65535)/65536),i=s-65536*a,a=Math.floor((s=o+a+65535)/65536),o=s-65536*a,a=Math.floor((s=l+a+65535)/65536),l=s-65536*a,a=Math.floor((s=c+a+65535)/65536),c=s-65536*a,a=Math.floor((s=d+a+65535)/65536),d=s-65536*a,a=Math.floor((s=h+a+65535)/65536),h=s-65536*a,a=Math.floor((s=u+a+65535)/65536),u=s-65536*a,a=Math.floor((s=x+a+65535)/65536),x=s-65536*a,a=Math.floor((s=f+a+65535)/65536),f=s-65536*a,a=Math.floor((s=p+a+65535)/65536),p=s-65536*a,a=Math.floor((s=b+a+65535)/65536),b=s-65536*a,a=Math.floor((s=m+a+65535)/65536),m=s-65536*a,a=Math.floor((s=y+a+65535)/65536),y=s-65536*a,a=Math.floor((s=w+a+65535)/65536),w=s-65536*a,a=Math.floor((s=g+a+65535)/65536),g=s-65536*a,n+=a-1+37*(a-1),e[0]=n,e[1]=i,e[2]=o,e[3]=l,e[4]=c,e[5]=d,e[6]=h,e[7]=u,e[8]=x,e[9]=f,e[10]=p,e[11]=b,e[12]=m,e[13]=y,e[14]=w,e[15]=g}function W(e,t){O(e,t,t)}function K(e,t){var s,a=r();for(s=0;s<16;s++)a[s]=t[s];for(s=253;s>=0;s--)W(a,a),2!==s&&4!==s&&O(a,a,t);for(s=0;s<16;s++)e[s]=a[s]}function H(e,t){var s,a=r();for(s=0;s<16;s++)a[s]=t[s];for(s=250;s>=0;s--)W(a,a),1!==s&&O(a,a,t);for(s=0;s<16;s++)e[s]=a[s]}function $(e,t,s){var a,n,i=new Uint8Array(32),o=new Float64Array(80),c=r(),d=r(),h=r(),u=r(),x=r(),f=r();for(n=0;n<31;n++)i[n]=t[n];for(i[31]=127&t[31]|64,i[0]&=248,I(o,s),n=0;n<16;n++)d[n]=o[n],u[n]=c[n]=h[n]=0;for(n=254,c[0]=u[0]=1;n>=0;--n)P(c,d,a=i[n>>>3]>>>(7&n)&1),P(h,u,a),B(x,c,h),D(c,c,h),B(h,d,u),D(d,d,u),W(u,x),W(f,c),O(c,h,c),O(h,d,x),B(x,c,h),D(c,c,h),W(d,c),D(h,u,f),O(c,h,l),B(c,c,u),O(h,h,c),O(c,u,f),O(u,d,o),W(d,x),P(c,d,a),P(h,u,a);for(n=0;n<16;n++)o[n+16]=c[n],o[n+32]=h[n],o[n+48]=d[n],o[n+64]=u[n];var p=o.subarray(32),b=o.subarray(16);return K(p,p),O(b,b,p),R(e,b),0}function Y(e,t){return $(e,t,n)}function F(e,t){return s(t,32),Y(e,t)}function V(e,t,r){var s=new Uint8Array(32);return $(s,r,t),w(e,a,s,g)}S.prototype.blocks=function(e,t,r){for(var s,a,n,i,o,l,c,d,h,u,x,f,p,b,m,y,w,g,v,j=2048*!this.fin,N=this.h[0],k=this.h[1],S=this.h[2],A=this.h[3],C=this.h[4],E=this.h[5],_=this.h[6],L=this.h[7],U=this.h[8],P=this.h[9],R=this.r[0],T=this.r[1],M=this.r[2],I=this.r[3],B=this.r[4],D=this.r[5],O=this.r[6],W=this.r[7],K=this.r[8],H=this.r[9];r>=16;)N+=8191&(s=255&e[t+0]|(255&e[t+1])<<8),k+=(s>>>13|(a=255&e[t+2]|(255&e[t+3])<<8)<<3)&8191,S+=(a>>>10|(n=255&e[t+4]|(255&e[t+5])<<8)<<6)&8191,A+=(n>>>7|(i=255&e[t+6]|(255&e[t+7])<<8)<<9)&8191,C+=(i>>>4|(o=255&e[t+8]|(255&e[t+9])<<8)<<12)&8191,E+=o>>>1&8191,_+=(o>>>14|(l=255&e[t+10]|(255&e[t+11])<<8)<<2)&8191,L+=(l>>>11|(c=255&e[t+12]|(255&e[t+13])<<8)<<5)&8191,U+=(c>>>8|(d=255&e[t+14]|(255&e[t+15])<<8)<<8)&8191,P+=d>>>5|j,h=(u=(h=0)+N*R+5*H*k+5*K*S+5*W*A+5*O*C)>>>13,u&=8191,u+=5*D*E,u+=5*B*_,u+=5*I*L,u+=5*M*U,u+=5*T*P,h+=u>>>13,u&=8191,h=(x=h+N*T+k*R+5*H*S+5*K*A+5*W*C)>>>13,x&=8191,x+=5*O*E,x+=5*D*_,x+=5*B*L,x+=5*I*U,x+=5*M*P,h+=x>>>13,x&=8191,h=(f=h+N*M+k*T+S*R+5*H*A+5*K*C)>>>13,f&=8191,f+=5*W*E,f+=5*O*_,f+=5*D*L,f+=5*B*U,f+=5*I*P,h+=f>>>13,f&=8191,h=(p=h+N*I+k*M+S*T+A*R+5*H*C)>>>13,p&=8191,p+=5*K*E,p+=5*W*_,p+=5*O*L,p+=5*D*U,p+=5*B*P,h+=p>>>13,p&=8191,h=(b=h+N*B+k*I+S*M+A*T+C*R)>>>13,b&=8191,b+=5*H*E,b+=5*K*_,b+=5*W*L,b+=5*O*U,b+=5*D*P,h+=b>>>13,b&=8191,h=(m=h+N*D+k*B+S*I+A*M+C*T)>>>13,m&=8191,m+=E*R,m+=5*H*_,m+=5*K*L,m+=5*W*U,m+=5*O*P,h+=m>>>13,m&=8191,h=(y=h+N*O+k*D+S*B+A*I+C*M)>>>13,y&=8191,y+=E*T,y+=_*R,y+=5*H*L,y+=5*K*U,y+=5*W*P,h+=y>>>13,y&=8191,h=(w=h+N*W+k*O+S*D+A*B+C*I)>>>13,w&=8191,w+=E*M,w+=_*T,w+=L*R,w+=5*H*U,w+=5*K*P,h+=w>>>13,w&=8191,h=(g=h+N*K+k*W+S*O+A*D+C*B)>>>13,g&=8191,g+=E*I,g+=_*M,g+=L*T,g+=U*R,g+=5*H*P,h+=g>>>13,g&=8191,h=(v=h+N*H+k*K+S*W+A*O+C*D)>>>13,v&=8191,v+=E*B,v+=_*I,v+=L*M,v+=U*T,v+=P*R,h+=v>>>13,v&=8191,u=8191&(h=(h=(h<<2)+h|0)+u|0),h>>>=13,x+=h,N=u,k=x,S=f,A=p,C=b,E=m,_=y,L=w,U=g,P=v,t+=16,r-=16;this.h[0]=N,this.h[1]=k,this.h[2]=S,this.h[3]=A,this.h[4]=C,this.h[5]=E,this.h[6]=_,this.h[7]=L,this.h[8]=U,this.h[9]=P},S.prototype.finish=function(e,t){var r,s,a,n,i=new Uint16Array(10);if(this.leftover){for(n=this.leftover,this.buffer[n++]=1;n<16;n++)this.buffer[n]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(r=this.h[1]>>>13,this.h[1]&=8191,n=2;n<10;n++)this.h[n]+=r,r=this.h[n]>>>13,this.h[n]&=8191;for(this.h[0]+=5*r,r=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=r,r=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=r,i[0]=this.h[0]+5,r=i[0]>>>13,i[0]&=8191,n=1;n<10;n++)i[n]=this.h[n]+r,r=i[n]>>>13,i[n]&=8191;for(i[9]-=8192,s=(1^r)-1,n=0;n<10;n++)i[n]&=s;for(n=0,s=~s;n<10;n++)this.h[n]=this.h[n]&s|i[n];for(n=1,this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,a=this.h[0]+this.pad[0],this.h[0]=65535&a;n<8;n++)a=(this.h[n]+this.pad[n]|0)+(a>>>16)|0,this.h[n]=65535&a;e[t+0]=this.h[0]>>>0&255,e[t+1]=this.h[0]>>>8&255,e[t+2]=this.h[1]>>>0&255,e[t+3]=this.h[1]>>>8&255,e[t+4]=this.h[2]>>>0&255,e[t+5]=this.h[2]>>>8&255,e[t+6]=this.h[3]>>>0&255,e[t+7]=this.h[3]>>>8&255,e[t+8]=this.h[4]>>>0&255,e[t+9]=this.h[4]>>>8&255,e[t+10]=this.h[5]>>>0&255,e[t+11]=this.h[5]>>>8&255,e[t+12]=this.h[6]>>>0&255,e[t+13]=this.h[6]>>>8&255,e[t+14]=this.h[7]>>>0&255,e[t+15]=this.h[7]>>>8&255},S.prototype.update=function(e,t,r){var s,a;if(this.leftover){for((a=16-this.leftover)>r&&(a=r),s=0;s<a;s++)this.buffer[this.leftover+s]=e[t+s];if(r-=a,t+=a,this.leftover+=a,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(r>=16&&(a=r-r%16,this.blocks(e,t,a),t+=a,r-=a),r){for(s=0;s<r;s++)this.buffer[this.leftover+s]=e[t+s];this.leftover+=r}};var z=[0x428a2f98,0xd728ae22,0x71374491,0x23ef65cd,0xb5c0fbcf,0xec4d3b2f,0xe9b5dba5,0x8189dbbc,0x3956c25b,0xf348b538,0x59f111f1,0xb605d019,0x923f82a4,0xaf194f9b,0xab1c5ed5,0xda6d8118,0xd807aa98,0xa3030242,0x12835b01,0x45706fbe,0x243185be,0x4ee4b28c,0x550c7dc3,0xd5ffb4e2,0x72be5d74,0xf27b896f,0x80deb1fe,0x3b1696b1,0x9bdc06a7,0x25c71235,0xc19bf174,0xcf692694,0xe49b69c1,0x9ef14ad2,0xefbe4786,0x384f25e3,0xfc19dc6,0x8b8cd5b5,0x240ca1cc,0x77ac9c65,0x2de92c6f,0x592b0275,0x4a7484aa,0x6ea6e483,0x5cb0a9dc,0xbd41fbd4,0x76f988da,0x831153b5,0x983e5152,0xee66dfab,0xa831c66d,0x2db43210,0xb00327c8,0x98fb213f,0xbf597fc7,0xbeef0ee4,0xc6e00bf3,0x3da88fc2,0xd5a79147,0x930aa725,0x6ca6351,0xe003826f,0x14292967,0xa0e6e70,0x27b70a85,0x46d22ffc,0x2e1b2138,0x5c26c926,0x4d2c6dfc,0x5ac42aed,0x53380d13,0x9d95b3df,0x650a7354,0x8baf63de,0x766a0abb,0x3c77b2a8,0x81c2c92e,0x47edaee6,0x92722c85,0x1482353b,0xa2bfe8a1,0x4cf10364,0xa81a664b,0xbc423001,0xc24b8b70,0xd0f89791,0xc76c51a3,0x654be30,0xd192e819,0xd6ef5218,0xd6990624,0x5565a910,0xf40e3585,0x5771202a,0x106aa070,0x32bbd1b8,0x19a4c116,0xb8d2d0c8,0x1e376c08,0x5141ab53,0x2748774c,0xdf8eeb99,0x34b0bcb5,0xe19b48a8,0x391c0cb3,0xc5c95a63,0x4ed8aa4a,0xe3418acb,0x5b9cca4f,0x7763e373,0x682e6ff3,0xd6b2b8a3,0x748f82ee,0x5defb2fc,0x78a5636f,0x43172f60,0x84c87814,0xa1f0ab72,0x8cc70208,0x1a6439ec,0x90befffa,0x23631e28,0xa4506ceb,0xde82bde9,0xbef9a3f7,0xb2c67915,0xc67178f2,0xe372532b,0xca273ece,0xea26619c,0xd186b8c7,0x21c0c207,0xeada7dd6,0xcde0eb1e,0xf57d4f7f,0xee6ed178,0x6f067aa,0x72176fba,0xa637dc5,0xa2c898a6,0x113f9804,0xbef90dae,0x1b710b35,0x131c471b,0x28db77f5,0x23047d84,0x32caab7b,0x40c72493,0x3c9ebe0a,0x15c9bebc,0x431d67c4,0x9c100d4c,0x4cc5d4be,0xcb3e42b6,0x597f299c,0xfc657e2a,0x5fcb6fab,0x3ad6faec,0x6c44198c,0x4a475817];function q(e,t,r,s){for(var a,n,i,o,l,c,d,h,u,x,f,p,b,m,y,w,g,v,j,N,k,S,A,C,E,_,L=new Int32Array(16),U=new Int32Array(16),P=e[0],R=e[1],T=e[2],M=e[3],I=e[4],B=e[5],D=e[6],O=e[7],W=t[0],K=t[1],H=t[2],$=t[3],Y=t[4],F=t[5],V=t[6],q=t[7],J=0;s>=128;){for(j=0;j<16;j++)N=8*j+J,L[j]=r[N+0]<<24|r[N+1]<<16|r[N+2]<<8|r[N+3],U[j]=r[N+4]<<24|r[N+5]<<16|r[N+6]<<8|r[N+7];for(j=0;j<80;j++)if(a=P,n=R,i=T,o=M,l=I,c=B,d=D,h=O,u=W,x=K,f=H,p=$,b=Y,m=F,y=V,w=q,k=O,A=65535&(S=q),C=S>>>16,E=65535&k,_=k>>>16,k=(I>>>14|Y<<18)^(I>>>18|Y<<14)^(Y>>>9|I<<23),A+=65535&(S=(Y>>>14|I<<18)^(Y>>>18|I<<14)^(I>>>9|Y<<23)),C+=S>>>16,E+=65535&k,_+=k>>>16,k=I&B^~I&D,A+=65535&(S=Y&F^~Y&V),C+=S>>>16,E+=65535&k,_+=k>>>16,k=z[2*j],A+=65535&(S=z[2*j+1]),C+=S>>>16,E+=65535&k,_+=k>>>16,k=L[j%16],A+=65535&(S=U[j%16]),C+=S>>>16,E+=65535&k,_+=k>>>16,C+=A>>>16,E+=C>>>16,_+=E>>>16,g=65535&E|_<<16,v=65535&A|C<<16,k=g,A=65535&(S=v),C=S>>>16,E=65535&k,_=k>>>16,k=(P>>>28|W<<4)^(W>>>2|P<<30)^(W>>>7|P<<25),A+=65535&(S=(W>>>28|P<<4)^(P>>>2|W<<30)^(P>>>7|W<<25)),C+=S>>>16,E+=65535&k,_+=k>>>16,k=P&R^P&T^R&T,A+=65535&(S=W&K^W&H^K&H),C+=S>>>16,E+=65535&k,_+=k>>>16,C+=A>>>16,E+=C>>>16,_+=E>>>16,h=65535&E|_<<16,w=65535&A|C<<16,k=o,A=65535&(S=p),C=S>>>16,E=65535&k,_=k>>>16,k=g,A+=65535&(S=v),C+=S>>>16,E+=65535&k,_+=k>>>16,C+=A>>>16,E+=C>>>16,_+=E>>>16,o=65535&E|_<<16,p=65535&A|C<<16,R=a,T=n,M=i,I=o,B=l,D=c,O=d,P=h,K=u,H=x,$=f,Y=p,F=b,V=m,q=y,W=w,j%16==15)for(N=0;N<16;N++)k=L[N],A=65535&(S=U[N]),C=S>>>16,E=65535&k,_=k>>>16,k=L[(N+9)%16],A+=65535&(S=U[(N+9)%16]),C+=S>>>16,E+=65535&k,_+=k>>>16,k=((g=L[(N+1)%16])>>>1|(v=U[(N+1)%16])<<31)^(g>>>8|v<<24)^g>>>7,A+=65535&(S=(v>>>1|g<<31)^(v>>>8|g<<24)^(v>>>7|g<<25)),C+=S>>>16,E+=65535&k,_+=k>>>16,k=((g=L[(N+14)%16])>>>19|(v=U[(N+14)%16])<<13)^(v>>>29|g<<3)^g>>>6,A+=65535&(S=(v>>>19|g<<13)^(g>>>29|v<<3)^(v>>>6|g<<26)),C+=S>>>16,E+=65535&k,_+=k>>>16,C+=A>>>16,E+=C>>>16,_+=E>>>16,L[N]=65535&E|_<<16,U[N]=65535&A|C<<16;k=P,A=65535&(S=W),C=S>>>16,E=65535&k,_=k>>>16,k=e[0],A+=65535&(S=t[0]),C+=S>>>16,E+=65535&k,_+=k>>>16,C+=A>>>16,E+=C>>>16,_+=E>>>16,e[0]=P=65535&E|_<<16,t[0]=W=65535&A|C<<16,k=R,A=65535&(S=K),C=S>>>16,E=65535&k,_=k>>>16,k=e[1],A+=65535&(S=t[1]),C+=S>>>16,E+=65535&k,_+=k>>>16,C+=A>>>16,E+=C>>>16,_+=E>>>16,e[1]=R=65535&E|_<<16,t[1]=K=65535&A|C<<16,k=T,A=65535&(S=H),C=S>>>16,E=65535&k,_=k>>>16,k=e[2],A+=65535&(S=t[2]),C+=S>>>16,E+=65535&k,_+=k>>>16,C+=A>>>16,E+=C>>>16,_+=E>>>16,e[2]=T=65535&E|_<<16,t[2]=H=65535&A|C<<16,k=M,A=65535&(S=$),C=S>>>16,E=65535&k,_=k>>>16,k=e[3],A+=65535&(S=t[3]),C+=S>>>16,E+=65535&k,_+=k>>>16,C+=A>>>16,E+=C>>>16,_+=E>>>16,e[3]=M=65535&E|_<<16,t[3]=$=65535&A|C<<16,k=I,A=65535&(S=Y),C=S>>>16,E=65535&k,_=k>>>16,k=e[4],A+=65535&(S=t[4]),C+=S>>>16,E+=65535&k,_+=k>>>16,C+=A>>>16,E+=C>>>16,_+=E>>>16,e[4]=I=65535&E|_<<16,t[4]=Y=65535&A|C<<16,k=B,A=65535&(S=F),C=S>>>16,E=65535&k,_=k>>>16,k=e[5],A+=65535&(S=t[5]),C+=S>>>16,E+=65535&k,_+=k>>>16,C+=A>>>16,E+=C>>>16,_+=E>>>16,e[5]=B=65535&E|_<<16,t[5]=F=65535&A|C<<16,k=D,A=65535&(S=V),C=S>>>16,E=65535&k,_=k>>>16,k=e[6],A+=65535&(S=t[6]),C+=S>>>16,E+=65535&k,_+=k>>>16,C+=A>>>16,E+=C>>>16,_+=E>>>16,e[6]=D=65535&E|_<<16,t[6]=V=65535&A|C<<16,k=O,A=65535&(S=q),C=S>>>16,E=65535&k,_=k>>>16,k=e[7],A+=65535&(S=t[7]),C+=S>>>16,E+=65535&k,_+=k>>>16,C+=A>>>16,E+=C>>>16,_+=E>>>16,e[7]=O=65535&E|_<<16,t[7]=q=65535&A|C<<16,J+=128,s-=128}return s}function J(e,t,r){var s,a=new Int32Array(8),n=new Int32Array(8),i=new Uint8Array(256),o=r;for(a[0]=0x6a09e667,a[1]=0xbb67ae85,a[2]=0x3c6ef372,a[3]=0xa54ff53a,a[4]=0x510e527f,a[5]=0x9b05688c,a[6]=0x1f83d9ab,a[7]=0x5be0cd19,n[0]=0xf3bcc908,n[1]=0x84caa73b,n[2]=0xfe94f82b,n[3]=0x5f1d36f1,n[4]=0xade682d1,n[5]=0x2b3e6c1f,n[6]=0xfb41bd6b,n[7]=0x137e2179,q(a,n,t,r),r%=128,s=0;s<r;s++)i[s]=t[o-r+s];for(i[r]=128,i[(r=256-(r<112)*128)-9]=0,f(i,r-8,o/0x20000000|0,o<<3),q(a,n,i,r),s=0;s<8;s++)f(e,8*s,a[s],n[s]);return 0}function G(e,t){var s=r(),a=r(),n=r(),i=r(),o=r(),l=r(),c=r(),h=r(),u=r();D(s,e[1],e[0]),D(u,t[1],t[0]),O(s,s,u),B(a,e[0],e[1]),B(u,t[0],t[1]),O(a,a,u),O(n,e[3],t[3]),O(n,n,d),O(i,e[2],t[2]),B(i,i,i),D(o,a,s),D(l,i,n),B(c,i,n),B(h,a,s),O(e[0],o,l),O(e[1],h,c),O(e[2],c,l),O(e[3],o,h)}function X(e,t,r){var s;for(s=0;s<4;s++)P(e[s],t[s],r)}function Z(e,t){var s=r(),a=r(),n=r();K(n,t[2]),O(s,t[0],n),O(a,t[1],n),R(e,a),e[31]^=M(s)<<7}function Q(e,t,r){var s,a;for(L(e[0],i),L(e[1],o),L(e[2],o),L(e[3],i),a=255;a>=0;--a)X(e,t,s=r[a/8|0]>>(7&a)&1),G(t,e),G(e,e),X(e,t,s)}function ee(e,t){var s=[r(),r(),r(),r()];L(s[0],h),L(s[1],u),L(s[2],o),O(s[3],h,u),Q(e,s,t)}function et(e,t,a){var n,i=new Uint8Array(64),o=[r(),r(),r(),r()];for(a||s(t,32),J(i,t,32),i[0]&=248,i[31]&=127,i[31]|=64,ee(o,i),Z(e,o),n=0;n<32;n++)t[n+32]=e[n];return 0}var er=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function es(e,t){var r,s,a,n;for(s=63;s>=32;--s){for(r=0,a=s-32,n=s-12;a<n;++a)t[a]+=r-16*t[s]*er[a-(s-32)],r=Math.floor((t[a]+128)/256),t[a]-=256*r;t[a]+=r,t[s]=0}for(a=0,r=0;a<32;a++)t[a]+=r-(t[31]>>4)*er[a],r=t[a]>>8,t[a]&=255;for(a=0;a<32;a++)t[a]-=r*er[a];for(s=0;s<32;s++)t[s+1]+=t[s]>>8,e[s]=255&t[s]}function ea(e){var t,r=new Float64Array(64);for(t=0;t<64;t++)r[t]=e[t];for(t=0;t<64;t++)e[t]=0;es(e,r)}function en(e,t,s,a){var n,i,o=new Uint8Array(64),l=new Uint8Array(64),c=new Uint8Array(64),d=new Float64Array(64),h=[r(),r(),r(),r()];for(J(o,a,32),o[0]&=248,o[31]&=127,o[31]|=64,n=0;n<s;n++)e[64+n]=t[n];for(n=0;n<32;n++)e[32+n]=o[32+n];for(J(c,e.subarray(32),s+32),ea(c),ee(h,c),Z(e,h),n=32;n<64;n++)e[n]=a[n];for(J(l,e,s+64),ea(l),n=0;n<64;n++)d[n]=0;for(n=0;n<32;n++)d[n]=c[n];for(n=0;n<32;n++)for(i=0;i<32;i++)d[n+i]+=l[n]*o[i];return es(e.subarray(32),d),s+64}function ei(e,t,s,a){var n,l,d,h,u,f,p,b,y=new Uint8Array(32),w=new Uint8Array(64),g=[r(),r(),r(),r()],v=[r(),r(),r(),r()];if(s<64||(n=r(),l=r(),d=r(),h=r(),u=r(),f=r(),p=r(),(L(v[2],o),I(v[1],a),W(d,v[1]),O(h,d,c),D(d,d,v[2]),B(h,v[2],h),W(u,h),W(f,u),O(p,f,u),O(n,p,d),O(n,n,h),H(n,n),O(n,n,d),O(n,n,h),O(n,n,h),O(v[0],n,h),W(l,v[0]),O(l,l,h),T(l,d)&&O(v[0],v[0],x),W(l,v[0]),O(l,l,h),T(l,d))?-1:(M(v[0])===a[31]>>7&&D(v[0],i,v[0]),O(v[3],v[0],v[1]),0)))return -1;for(b=0;b<s;b++)e[b]=t[b];for(b=0;b<32;b++)e[b+32]=a[b];if(J(w,e,s),ea(w),Q(g,v,w),ee(v,t.subarray(32)),G(g,v),Z(y,g),s-=64,m(t,0,y,0)){for(b=0;b<s;b++)e[b]=0;return -1}for(b=0;b<s;b++)e[b]=t[b+64];return s}function eo(e,t){if(32!==e.length)throw Error("bad key size");if(24!==t.length)throw Error("bad nonce size")}function el(){for(var e=0;e<arguments.length;e++)if(!(arguments[e]instanceof Uint8Array))throw TypeError("unexpected type, use Uint8Array")}function ec(e){for(var t=0;t<e.length;t++)e[t]=0}e.lowlevel={crypto_core_hsalsa20:w,crypto_stream_xor:k,crypto_stream:N,crypto_stream_salsa20_xor:v,crypto_stream_salsa20:j,crypto_onetimeauth:A,crypto_onetimeauth_verify:C,crypto_verify_16:b,crypto_verify_32:m,crypto_secretbox:E,crypto_secretbox_open:_,crypto_scalarmult:$,crypto_scalarmult_base:Y,crypto_box_beforenm:V,crypto_box_afternm:E,crypto_box:function(e,t,r,s,a,n){var i=new Uint8Array(32);return V(i,a,n),E(e,t,r,s,i)},crypto_box_open:function(e,t,r,s,a,n){var i=new Uint8Array(32);return V(i,a,n),_(e,t,r,s,i)},crypto_box_keypair:F,crypto_hash:J,crypto_sign:en,crypto_sign_keypair:et,crypto_sign_open:ei,crypto_secretbox_KEYBYTES:32,crypto_secretbox_NONCEBYTES:24,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:16,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:32,crypto_box_SECRETKEYBYTES:32,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:24,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:64,crypto_sign_PUBLICKEYBYTES:32,crypto_sign_SECRETKEYBYTES:64,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64,gf:r,D:c,L:er,pack25519:R,unpack25519:I,M:O,A:B,S:W,Z:D,pow2523:H,add:G,set25519:L,modL:es,scalarmult:Q,scalarbase:ee},e.randomBytes=function(e){var t=new Uint8Array(e);return s(t,e),t},e.secretbox=function(e,t,r){el(e,t,r),eo(r,t);for(var s=new Uint8Array(32+e.length),a=new Uint8Array(s.length),n=0;n<e.length;n++)s[n+32]=e[n];return E(a,s,s.length,t,r),a.subarray(16)},e.secretbox.open=function(e,t,r){el(e,t,r),eo(r,t);for(var s=new Uint8Array(16+e.length),a=new Uint8Array(s.length),n=0;n<e.length;n++)s[n+16]=e[n];return s.length<32||0!==_(a,s,s.length,t,r)?null:a.subarray(32)},e.secretbox.keyLength=32,e.secretbox.nonceLength=24,e.secretbox.overheadLength=16,e.scalarMult=function(e,t){if(el(e,t),32!==e.length)throw Error("bad n size");if(32!==t.length)throw Error("bad p size");var r=new Uint8Array(32);return $(r,e,t),r},e.scalarMult.base=function(e){if(el(e),32!==e.length)throw Error("bad n size");var t=new Uint8Array(32);return Y(t,e),t},e.scalarMult.scalarLength=32,e.scalarMult.groupElementLength=32,e.box=function(t,r,s,a){var n=e.box.before(s,a);return e.secretbox(t,r,n)},e.box.before=function(e,t){el(e,t);if(32!==e.length)throw Error("bad public key size");if(32!==t.length)throw Error("bad secret key size");var r=new Uint8Array(32);return V(r,e,t),r},e.box.after=e.secretbox,e.box.open=function(t,r,s,a){var n=e.box.before(s,a);return e.secretbox.open(t,r,n)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var e=new Uint8Array(32),t=new Uint8Array(32);return F(e,t),{publicKey:e,secretKey:t}},e.box.keyPair.fromSecretKey=function(e){if(el(e),32!==e.length)throw Error("bad secret key size");var t=new Uint8Array(32);return Y(t,e),{publicKey:t,secretKey:new Uint8Array(e)}},e.box.publicKeyLength=32,e.box.secretKeyLength=32,e.box.sharedKeyLength=32,e.box.nonceLength=24,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(e,t){if(el(e,t),64!==t.length)throw Error("bad secret key size");var r=new Uint8Array(64+e.length);return en(r,e,e.length,t),r},e.sign.open=function(e,t){if(el(e,t),32!==t.length)throw Error("bad public key size");var r=new Uint8Array(e.length),s=ei(r,e,e.length,t);if(s<0)return null;for(var a=new Uint8Array(s),n=0;n<a.length;n++)a[n]=r[n];return a},e.sign.detached=function(t,r){for(var s=e.sign(t,r),a=new Uint8Array(64),n=0;n<a.length;n++)a[n]=s[n];return a},e.sign.detached.verify=function(e,t,r){if(el(e,t,r),64!==t.length)throw Error("bad signature size");if(32!==r.length)throw Error("bad public key size");var s,a=new Uint8Array(64+e.length),n=new Uint8Array(64+e.length);for(s=0;s<64;s++)a[s]=t[s];for(s=0;s<e.length;s++)a[s+64]=e[s];return ei(n,a,a.length,r)>=0},e.sign.keyPair=function(){var e=new Uint8Array(32),t=new Uint8Array(64);return et(e,t),{publicKey:e,secretKey:t}},e.sign.keyPair.fromSecretKey=function(e){if(el(e),64!==e.length)throw Error("bad secret key size");for(var t=new Uint8Array(32),r=0;r<t.length;r++)t[r]=e[32+r];return{publicKey:t,secretKey:new Uint8Array(e)}},e.sign.keyPair.fromSeed=function(e){if(el(e),32!==e.length)throw Error("bad seed size");for(var t=new Uint8Array(32),r=new Uint8Array(64),s=0;s<32;s++)r[s]=e[s];return et(t,r,!0),{publicKey:t,secretKey:r}},e.sign.publicKeyLength=32,e.sign.secretKeyLength=64,e.sign.seedLength=32,e.sign.signatureLength=64,e.hash=function(e){el(e);var t=new Uint8Array(64);return J(t,e,e.length),t},e.hash.hashLength=64,e.verify=function(e,t){return el(e,t),0!==e.length&&0!==t.length&&e.length===t.length&&0===p(e,0,t,0,e.length)},e.setPRNG=function(e){s=e},(t="u">typeof self?self.crypto||self.msCrypto:null)&&t.getRandomValues?e.setPRNG(function(e,r){var s,a=new Uint8Array(r);for(s=0;s<r;s+=65536)t.getRandomValues(a.subarray(s,s+Math.min(r-s,65536)));for(s=0;s<r;s++)e[s]=a[s];ec(a)}):(t={}).randomBytes&&e.setPRNG(function(e,r){var s,a=t.randomBytes(r);for(s=0;s<r;s++)e[s]=a[s];ec(a)})}(t.exports?t.exports:self.nacl=self.nacl||{})},23014,e=>{"use strict";var t=e.i(38316),r=e.i(37806),s=e.i(28424),a=e.i(72378),n=e.i(50523),i=e.i(28224),o=e.i(61280);class l{static async encryptPayload(e,t){let r=JSON.stringify(e),s=new TextEncoder().encode(r).length,a=Object.keys(e).length,n=await this.encryptHybridAES(r,t);return{encrypted:n.encrypted,mode:"hybrid-aes",metadata:{keySize:n.keySize,payloadSize:s,recipients:a}}}static async encryptHybridAES(e,t){let r=new TextEncoder().encode(e),s=crypto.getRandomValues(new Uint8Array(32)),a=crypto.getRandomValues(new Uint8Array(16)),n=await crypto.subtle.importKey("raw",s,{name:"AES-CBC"},!1,["encrypt"]),i=await crypto.subtle.encrypt({name:"AES-CBC",iv:a},n,r),o=await this.importRSAPublicKey(t),l=new Uint8Array(await crypto.subtle.encrypt({name:"RSA-OAEP"},o,s)),c=new Uint8Array(4);new DataView(c.buffer).setUint32(0,l.length,!1);let d=new Uint8Array(4+l.length+16+i.byteLength),h=0;return d.set(c,h),h+=4,d.set(l,h),h+=l.length,d.set(a,h),h+=16,d.set(new Uint8Array(i),h),{encrypted:this.arrayBufferToBase64(d.buffer),keySize:l.length}}static async importRSAPublicKey(e){let t=(e=e.replace(/\\n/g,"\n")).replace("-----BEGIN PUBLIC KEY-----","").replace("-----END PUBLIC KEY-----","").replace(/\s/g,""),r=this.base64ToArrayBuffer(t);return await crypto.subtle.importKey("spki",r,{name:"RSA-OAEP",hash:"SHA-256"},!1,["encrypt"])}static arrayBufferToBase64(e){let t=new Uint8Array(e),r="";for(let e=0;e<t.length;e++)r+=String.fromCharCode(t[e]);return btoa(r)}static base64ToArrayBuffer(e){let t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r.buffer}static calculateMaxRecipients(){return Math.floor(133.33333333333334)}static estimateEncryptedSize(e){return 276+(75*e+50)}}let c={usdc:{symbol:"USDC",decimals:7,isNative:!1},xlm:{symbol:"XLM",decimals:7,isNative:!0}},d={SOROBAN_RPC_URL:"https://soroban-testnet.stellar.org/",NETWORK_PASSPHRASE:"Test SDF Network ; September 2015",TREASURY_CONTRACT_ID:"CCHD3HHFOLW3UYSAKJSZRRHGEGXJAFRVM4IJKG4SRLY7CF4TLZVAD2Q7",IDM_CONTRACT_ID:n.default.env.NEXT_PUBLIC_IDM_CONTRACT_ID||"",ASSET_ADDRESS_USDC:"CBIELTK6YBZJU5UP2WWQEUCYKLPU6AUNZ2BQ4WWFEIE3USCIHMXQDAMA",ASSET_ADDRESS_XLM:"CDLZFC3SYJYDZT7K67VZ75HPJVIEUVNIXF47ZG2FB2RMQQVU2HHGCYSC",RELAYER_URL:"https://tess-serverv0-production.up.railway.app/api/relayer",BACKEND_URL:"https://tess-serverv0-production.up.railway.app",DISTRIBUTOR_RSA_PUBLIC_KEY:"MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA1y0YV0EENoTk82DWWy4n57OSv8ilEIWSHSVlsvJMgZ/C+95H0aNJVWKjcIPaYOYSuF7sv/ZLuUtYt6vi8CCiRnyXLLno7huh6rlvC6H8k4Zu8G0P+uNy8XimiF6K8PROnLlQfSjiYRVmjAUkRqCT\nOeDGvvDnC5fTDjMwBOOi8U6ve+HjV5Fnh4x2AN5x+9xKL6q/Gr7Ju8j4oUJJa6xmwU2MIbIrOtiU1irIDhLBQAJ/6vpYs8/xi6KQ3Mu1Gs6UnO51ITu0++0lsSJMHWdjqs6Xpbb56KnsWzOCSlG1TtpSU+8Ny8TCTpViz549MNLoWJvi/5uFxHi7CxxjlwP5rwIDAQAB",RELAYER_NACL_PUBLIC_KEY:"W8V80k2Kobco8yhEW6RiyzLmv7ortHBjiCo5OK0l/RM="};function h(e="usdc"){let t,r=c[e.toLowerCase()];if(!r)throw Error(`Unsupported token: ${e}. Supported tokens: ${Object.keys(c).join(", ")}`);let s=e.toLowerCase();if("usdc"===s)t=d.ASSET_ADDRESS_USDC;else if("xlm"===s)t=d.ASSET_ADDRESS_XLM;else throw Error(`Asset contract ID not configured for ${e}`);if(!t)throw Error(`${e.toUpperCase()} asset contract ID not found in environment variables`);return{config:r,contractId:t}}function u(e){return btoa(String.fromCharCode(...e))}async function x(e,t){let r=`${e}${t}`,s=new TextEncoder().encode(r);return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",s))).map(e=>e.toString(16).padStart(2,"0")).join("").slice(0,32)}async function f(e,t){let r=new TextEncoder().encode(e+t);return btoa(String.fromCharCode(...new Uint8Array(await crypto.subtle.digest("SHA-256",r)).slice(0,16)))}async function p(e){let t=new TextEncoder().encode(e);return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",t))).map(e=>e.toString(16).padStart(2,"0")).join("")}async function b(){let e=new i.rpc.Server(d.SOROBAN_RPC_URL);return(await e.getHealth()).latestLedger}async function m(e,t,r,s,a,n="usdc",i){try{let o=await p(e),l={usdc:1,xlm:.12}[n.toLowerCase()]||1,c={depositorHash:o,hashLN:t,depositorPublicKey:e,amount:r,expectedIdentity:s,txHash:a,token:n,assetContractId:i,tokenPriceUsd:l,depositValueUsd:r*l};console.log("[PrivacyPay] Notifying backend of deposit:",c);let h=await fetch(`${d.BACKEND_URL}/api/treasury/deposit/notify`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(!h.ok){let e=await h.text();throw Error(`Backend notification failed: ${h.status} - ${e}`)}console.log("[PrivacyPay] Backend notified successfully")}catch(e){console.warn("[PrivacyPay] Failed to notify backend:",e.message)}}async function y(e){try{let t=await p(e),r=`${d.BACKEND_URL}/api/treasury/deposits?depositorHash=${t}`;console.log("[PrivacyPay] Fetching deposits from:",r);let s=await fetch(r);if(!s.ok)throw Error(`Failed to fetch deposits: ${s.status}`);return((await s.json()).deposits||[]).map(e=>({hashLN:e.hashLN,identity:e.expectedIdentity,amount:parseFloat(e.amount),txHash:e.txHash,timestamp:new Date(e.createdAt).getTime(),status:e.status.toLowerCase(),token:e.token||"usdc"}))}catch(e){return console.error("[PrivacyPay] Error fetching deposits from backend:",e),[]}}async function w(e){try{let t=new i.rpc.Server(d.SOROBAN_RPC_URL);try{await t.getAccount(e)}catch(e){if(e.message?.includes("Not Found")||404===e.code)return{exists:!1,hasAsset:!1,error:"Account does not exist. Please fund your wallet first."};throw e}return{exists:!0,hasAsset:!0}}catch(e){return{exists:!1,hasAsset:!1,error:e.message}}}async function g(e){let{depositorAddress:t,hashLN:r,amount:s,token:a="usdc"}=e;if(!d.TREASURY_CONTRACT_ID)throw Error("Missing required contract IDs. Check environment variables.");let{config:n,contractId:o}=h(a);console.log("[PrivacyPay Deposit] hashLN:",r),console.log("[PrivacyPay Deposit] hashLN type:",typeof r),console.log("[PrivacyPay Deposit] hashLN length:",r.length),console.log("[PrivacyPay Deposit] Building deposit transaction:",{depositorAddress:t,hashLN:r,amount:s,token:n.symbol,treasuryContract:d.TREASURY_CONTRACT_ID,assetAddress:o,networkPassphrase:d.NETWORK_PASSPHRASE});let l=new i.rpc.Server(d.SOROBAN_RPC_URL),c=await w(t);if(!c.exists)throw Error(c.error||"Account does not exist");let u=await l.getAccount(t);console.log("[PrivacyPay] Account loaded, sequence:",u.sequenceNumber());let x=new i.Contract(d.TREASURY_CONTRACT_ID),f=Math.floor(s*Math.pow(10,n.decimals));console.log("[PrivacyPay] Amount in stroops:",f);let p=new i.TransactionBuilder(new i.Account(t,u.sequenceNumber()),{fee:"100",networkPassphrase:d.NETWORK_PASSPHRASE}).addOperation(x.call("deposit",(0,i.nativeToScVal)(t,{type:"address"}),(0,i.nativeToScVal)(r,{type:"string"}),(0,i.nativeToScVal)(f,{type:"i128"}),(0,i.nativeToScVal)(o,{type:"address"}))).setTimeout(30).build();console.log("[PrivacyPay] Transaction built, simulating...");let b=await l.simulateTransaction(p);if(console.log("[PrivacyPay] Simulation response:",JSON.stringify(b,null,2)),i.rpc.Api.isSimulationError(b)){let e=b.error||"Unknown simulation error";throw console.error("[PrivacyPay] Simulation error details:",e),Error(`Simulation failed: ${e}`)}let m=i.rpc.assembleTransaction(p,b).build();return console.log("[PrivacyPay] Transaction assembled successfully"),m.toXDR()}async function v(e){try{let t=new i.rpc.Server(d.SOROBAN_RPC_URL),r=i.TransactionBuilder.fromXDR(e,d.NETWORK_PASSPHRASE),s=await t.sendTransaction(r);if("ERROR"===s.status)return{success:!1,error:`Transaction failed: ${JSON.stringify(s)}`};let a=await t.getTransaction(s.hash),n=0;for(;a.status===i.rpc.Api.GetTransactionStatus.NOT_FOUND&&n<30;)await new Promise(e=>setTimeout(e,1e3)),a=await t.getTransaction(s.hash),n++;if(a.status===i.rpc.Api.GetTransactionStatus.SUCCESS)return{success:!0,txHash:s.hash};return{success:!1,txHash:s.hash,error:`Transaction failed with status: ${a.status}`}}catch(e){return{success:!1,error:e.message}}}async function j(e){let t=d.DISTRIBUTOR_RSA_PUBLIC_KEY;if(!t)throw Error("Distributor RSA public key not configured");let r=await l.encryptPayload(e,t);return console.log(`ðŸ” Hybrid encryption: ${r.metadata.recipients} recipients, ${r.metadata.payloadSize} bytes`),r.encrypted}async function N(e){try{let{hashLN:t,recipients:r,senderRawPublicKey:s,token:a="usdc"}=e;console.log("[PrivacyPay Withdraw] hashLN:",t),console.log("[PrivacyPay Withdraw] hashLN type:",typeof t),console.log("[PrivacyPay Withdraw] hashLN length:",t.length),console.log("[PrivacyPay Withdraw] token:",a);let n=Object.values(r).reduce((e,t)=>e+parseFloat(t),0),i=await j(r),l=u(s),c=function(e,t,r,s,a="usdc"){let n=d.RELAYER_NACL_PUBLIC_KEY;if(!n)throw Error("Relayer NaCl public key not configured");let i=Uint8Array.from(atob(n),e=>e.charCodeAt(0)),l={requestId:crypto.randomUUID(),hashLN:e,totalAmount:t,encryptedD:r,senderPublicKey:s,token:a,timestamp:Date.now()};console.log("[PrivacyPay Relayer Payload] hashLN in payload:",l.hashLN),console.log("[PrivacyPay Relayer Payload] Full payload (pre-encryption):",{requestId:l.requestId,hashLN:l.hashLN,totalAmount:l.totalAmount,senderPublicKey:l.senderPublicKey,timestamp:l.timestamp});let c=JSON.stringify(l),h=new TextEncoder().encode(c),x=o.default.box.keyPair(),f=o.default.randomBytes(o.default.box.nonceLength),p=o.default.box(h,f,i,x.secretKey),b=new Uint8Array(x.publicKey.length+f.length+p.length);return b.set(x.publicKey,0),b.set(f,x.publicKey.length),b.set(p,x.publicKey.length+f.length),u(b)}(t,n,i,l,a),h=await fetch(`${d.RELAYER_URL}/withdraw`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({payload:c})}),x=await h.json();if(console.log("[PrivacyPay Withdraw] Relayer response:",JSON.stringify(x)),!h.ok)return{success:!1,error:`Relayer rejected withdrawal: ${h.status} - ${JSON.stringify(x)}`};let f=x.requestId||x.withdrawalRequestId||x._id||x.jobId,p=x.jobId||x.withdrawalRequestId||x._id;return{success:!0,requestId:f,jobId:p,senderIdentity:x.senderIdentity}}catch(e){return{success:!1,error:e.message}}}async function k(e){try{let t=await fetch(`${d.RELAYER_URL}/status`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jobIds:e})});if(!t.ok)throw Error(`Failed to check job statuses: ${t.status}`);let r=await t.json(),s=Array.isArray(r)?r:r.jobs||[],a={};for(let e of s){let t=e.withdrawalRequestId||e._id;a[t]||(a[t]=[]),a[t].push(e)}return{jobs:Object.entries(a).map(([e,t])=>{let r=t.every(e=>"SUCCESS"===e.status),s=t.some(e=>"FAILED"===e.status),a=t.some(e=>"PROCESSING"===e.status),n=t.find(e=>e.stellarTransactionHash);return{jobId:e,status:r?"completed":s?"failed":a?"processing":"pending",txHash:n?.stellarTransactionHash}})}}catch(e){return console.error("Error checking job statuses:",e),{jobs:[]}}}let S="tesseract_privacy_pay";function A(e){let t=localStorage.getItem(S);if(!t)return{walletAddress:e,deposits:{},withdrawals:{}};try{return JSON.parse(t)[e]||{walletAddress:e,deposits:{},withdrawals:{}}}catch{return{walletAddress:e,deposits:{},withdrawals:{}}}}function C(e){let t=localStorage.getItem(S),r={};if(t)try{r=JSON.parse(t)}catch{r={}}r[e.walletAddress]=e,localStorage.setItem(S,JSON.stringify(r))}function E(e){return Object.values(A(e).withdrawals).sort((e,t)=>t.timestamp-e.timestamp)}var _=e.i(14234);function L({onSuccess:e}){let{walletState:s}=(0,a.useWallet)(),{address:n,isConnected:i}=s,[o,l]=(0,r.useState)(""),[d,u]=(0,r.useState)("usdc"),[p,y]=(0,r.useState)("idle"),[w,j]=(0,r.useState)(null),[N,k]=(0,r.useState)(null),[S,A]=(0,r.useState)(null),C=async()=>{if(!n||!o)return;let t=parseFloat(o);if(isNaN(t)||t<=0)return void j("Please enter a valid amount");j(null),k(null);try{y("generating");let r=await b(),s=Math.floor(1e9*Math.random()),a=await x(r,s);A(a);let i=await f(a,n);console.log("ðŸ”‘ [Deposit] Identity Details:"),console.log("   HashLN:",a),console.log("   Depositor Address:",n),console.log("   Expected Identity:",i),y("building");let{contractId:o}=h(d),l=await g({depositorAddress:n,hashLN:a,amount:t,token:d});y("signing");let c=await (0,_.signTransaction)(l,{networkPassphrase:"Test SDF Network ; September 2015"});if("string"==typeof c)throw Error("Signing was cancelled");let u=c.signedTxXdr;y("submitting");let p=await v(u);if(p.success&&p.txHash)k(p.txHash),y("notifying"),await m(n,a,t,i,p.txHash,d,o),y("success"),e?.(p.txHash,a);else throw Error(p.error||"Transaction failed")}catch(e){console.error("Deposit error:",e),j(e.message||"Deposit failed"),y("error")}},E=()=>{switch(p){case"generating":return"Generating secure hash...";case"building":return"Building transaction...";case"signing":return"Please sign in Freighter...";case"submitting":return"Submitting to Stellar...";case"notifying":return"Notifying backend...";case"success":return"Deposit successful!";case"error":return w||"An error occurred";default:return null}},L=["generating","building","signing","submitting","notifying"].includes(p);return(0,t.jsxs)("div",{className:"space-y-6 w-full",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-white/60 mb-2",children:"Select Pool"}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(c).map(([e,r])=>(0,t.jsx)("button",{onClick:()=>u(e),disabled:L,className:`p-4 rounded-xl border-2 transition-all disabled:opacity-50 disabled:cursor-not-allowed ${d===e?"border-blue-500 bg-blue-500/10":"border-white/10 bg-transparent hover:border-white/20"}`,children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"font-semibold text-white",children:r.symbol}),d===e&&(0,t.jsx)("svg",{className:"w-5 h-5 text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]})},e))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-white/60 mb-2",children:"Deposit Amount"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:"number",value:o,onChange:e=>l(e.target.value),placeholder:"0.00",disabled:L,className:"w-full bg-transparent border border-white/10 rounded-xl px-4 py-3 text-white placeholder-white/30 focus:outline-none focus:border-blue-500/50 focus:ring-1 focus:ring-blue-500/50 transition-all disabled:opacity-50 disabled:cursor-not-allowed"}),(0,t.jsx)("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-white/40 text-sm",children:c[d]?.symbol||"USDC"})]})]}),E()&&(0,t.jsxs)("div",{className:`flex items-center gap-3 p-4 rounded-xl ${"success"===p?"bg-green-500/10 border border-green-500/20":"error"===p?"bg-red-500/10 border border-red-500/20":"bg-white/5 border border-white/10"}`,children:[L&&(0,t.jsx)("div",{className:"w-5 h-5 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}),"success"===p&&(0,t.jsx)("svg",{className:"w-5 h-5 text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"error"===p&&(0,t.jsx)("svg",{className:"w-5 h-5 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),(0,t.jsx)("span",{className:`text-sm ${"success"===p?"text-green-400":"error"===p?"text-red-400":"text-white/60"}`,children:E()})]}),N&&(0,t.jsxs)("div",{className:"bg-white/5 border border-white/10 rounded-xl p-4",children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-white/40 mb-2",children:"Transaction Hash"}),(0,t.jsx)("a",{href:`https://stellar.expert/explorer/testnet/tx/${N}`,target:"_blank",rel:"noopener noreferrer",className:"font-mono text-sm text-blue-400 hover:text-blue-300 transition-colors break-all",children:N})]}),(0,t.jsx)("button",{onClick:C,disabled:!i||!o||L,className:`w-full py-4 rounded-xl font-semibold transition-all ${!i||!o||L?"bg-white/5 text-white/30 cursor-not-allowed":"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 text-white"}`,children:i?L?E():"Deposit to Privacy Pool":"Connect Wallet First"})]})}let U=["Signature Confirmed","Constructing Proof","Deriving Identity","Deriving Fields","Success"];function P({onSuccess:e}){let{walletState:s}=(0,a.useWallet)(),{address:n,isConnected:o}=s,[d,h]=(0,r.useState)(""),[u,x]=(0,r.useState)("usdc"),[p,b]=(0,r.useState)([{address:"",amount:""}]),[m,w]=(0,r.useState)("idle"),[g,v]=(0,r.useState)(null),[j,k]=(0,r.useState)(null),[S,E]=(0,r.useState)(!1),[L,P]=(0,r.useState)(!1),[R,T]=(0,r.useState)(!1),[M,I]=(0,r.useState)(0),[B,D]=(0,r.useState)("manual"),[O,W]=(0,r.useState)(null),[K,H]=(0,r.useState)(null),$=(0,r.useRef)(null),[Y,F]=(0,r.useState)([]),[V,z]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{if(!n)return F([]);z(!0);try{let e=await y(n);e.forEach(e=>{let t;(t=A(n)).deposits[e.hashLN]=e,C(t)}),F(e)}catch(e){console.error("Failed to fetch deposits:",e),F(Object.values(A(n).deposits).sort((e,t)=>t.timestamp-e.timestamp))}finally{z(!1)}})()},[n]);let q=async()=>{if(n&&o){P(!0);try{let e=`Decrypting privacy deposits for ${n} at ${new Date().toISOString()}`;await (0,_.signMessage)(e,{address:n}),T(!0);let t=Math.floor(5001*Math.random())+5e3-2e3,r=Math.floor(.1*t),s=Math.floor(.4*t),a=Math.floor(.4*t),i=Math.floor(.1*t);I(0),await new Promise(e=>setTimeout(e,r)),I(1),await new Promise(e=>setTimeout(e,s)),I(2),await new Promise(e=>setTimeout(e,a)),I(3),await new Promise(e=>setTimeout(e,i)),I(4),await new Promise(e=>setTimeout(e,2e3)),T(!1),E(!0)}catch(e){console.error("Decryption failed",e)}finally{P(!1)}}},J=e=>{D(e),W(null),H(null),"manual"===e&&b([{address:"",amount:""}])},G=(e,t,r)=>{let s=[...p];s[e][t]=r,b(s)},X=()=>p.reduce((e,t)=>{let r=parseFloat(t.amount);return e+(isNaN(r)?0:r)},0),Z=e=>56===e.address.length&&e.address.startsWith("G")&&!isNaN(parseFloat(e.amount))&&parseFloat(e.amount)>0,Q=p.every(Z),ee=async()=>{if(n&&d&&Q){v(null),k(null);try{var t;let r;w("encrypting");let s={};p.forEach(e=>{s[e.address]=e.amount});let a=await f(d,n);console.log("ðŸ”‘ [Withdrawal] Identity Details:"),console.log("   HashLN:",d),console.log("   Sender Address:",n),console.log("   Expected Identity (frontend):",a);let o=i.Keypair.fromPublicKey(n).rawPublicKey();console.log("   Raw Public Key (base64):",btoa(String.fromCharCode(...o))),w("submitting");let l=await N({hashLN:d,recipients:s,senderPublicKey:n,senderRawPublicKey:o,token:u});if(!l.success)throw Error(l.error||"Relayer rejected the withdrawal request");if(!l.requestId)throw console.error("[Withdrawal] Missing requestId in result:",l),Error("Relayer returned success but no request ID");k(l.requestId),w("success"),t={requestId:l.requestId,jobId:l.jobId,hashLN:d,totalAmount:X(),recipients:s,timestamp:Date.now(),status:"pending",senderIdentity:l.senderIdentity,token:u},(r=A(n)).withdrawals[t.requestId]=t,C(r),e?.(l.requestId)}catch(e){console.error("Withdrawal error:",e),v(e.message||"Withdrawal failed"),w("error")}}},et=()=>{switch(m){case"encrypting":return"Encrypting withdrawal request...";case"submitting":return"Submitting to relayer...";case"success":return"Withdrawal request submitted!";case"error":return g||"An error occurred";default:return null}},er=["encrypting","submitting"].includes(m);return(0,t.jsxs)("div",{className:"space-y-6 relative",children:[R&&(0,t.jsx)("div",{className:" inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",children:(0,t.jsxs)("div",{className:"bg-[#0A0A0A] border border-white/10 rounded-2xl p-8 max-w-sm w-full shadow-2xl space-y-6 text-center transform transition-all",children:[(0,t.jsxs)("div",{className:"relative w-16 h-16 mx-auto mb-4",children:[(0,t.jsx)("div",{className:"absolute inset-0 border-2 border-purple-500/20 rounded-full"}),(0,t.jsx)("div",{className:"absolute inset-0 border-2 border-purple-500 border-t-transparent rounded-full animate-spin"}),(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:4===M?(0,t.jsx)("svg",{className:"w-8 h-8 text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):(0,t.jsx)("svg",{className:"w-6 h-6 text-purple-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-white tracking-tight",children:4===M?"Decryption Complete":"Decrypting Deposits"}),(0,t.jsx)("p",{className:"text-white/40 text-sm",children:"Please wait while we securely process your data"})]}),(0,t.jsx)("div",{className:"space-y-3 pt-2",children:U.map((e,r)=>{let s=r===M,a=r<M;return(0,t.jsxs)("div",{className:`flex items-center gap-3 transition-all duration-300 ${s?"opacity-100 transform scale-105":a?"opacity-50":"opacity-20"}`,children:[(0,t.jsx)("div",{className:`w-2 h-2 rounded-full transition-colors ${s?"bg-purple-500 animate-pulse":a?"bg-green-500":"bg-white"}`}),(0,t.jsx)("span",{className:`text-sm font-medium ${s?"text-purple-400":a?"text-green-400":"text-white"}`,children:e}),a&&(0,t.jsx)("svg",{className:"w-4 h-4 text-green-500 ml-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]},r)})})]})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-white/60",children:"Select Deposit"}),!S&&Y.length>0&&!V&&(0,t.jsx)("button",{onClick:q,disabled:L||!o,className:"text-xs text-purple-400 hover:text-purple-300 flex items-center gap-1 transition-colors disabled:opacity-50",children:L?(0,t.jsx)("span",{className:"animate-pulse",children:"Decrypting..."}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 11V7a4 4 0 118 0m-4 8v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z"})}),"Decrypt All"]})})]}),V?(0,t.jsxs)("div",{className:"w-full bg-transparent border border-white/10 rounded-xl px-4 py-3 flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}),(0,t.jsx)("span",{className:"text-white/60 text-sm",children:"Loading deposits..."})]}):Y.length>0?(0,t.jsxs)("select",{value:d,onChange:e=>h(e.target.value),disabled:er,className:"w-full bg-transparent border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-blue-500/50 focus:ring-1 focus:ring-blue-500/50 transition-all disabled:opacity-50",children:[(0,t.jsx)("option",{value:"",children:S?"Select from your deposits":"Encrypted Deposits Found"}),Y.filter(e=>"confirmed"===e.status).map(e=>(0,t.jsx)("option",{value:e.hashLN,children:S?`${e.hashLN.slice(0,16)}... (${e.amount} ${(e.token||"usdc").toUpperCase()})`:`Identity: ${(e.identity||"").slice(0,20)}...`},e.hashLN))]}):(0,t.jsx)("input",{type:"text",value:d,onChange:e=>h(e.target.value),placeholder:"Enter your deposit hash or make a deposit first",disabled:er,className:"w-full bg-transparent border border-white/10 rounded-xl px-4 py-3 text-white placeholder-white/30 focus:outline-none focus:border-blue-500/50 focus:ring-1 focus:ring-blue-500/50 transition-all disabled:opacity-50 font-mono text-sm"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-white/60 mb-2",children:"Select Pool"}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(c).map(([e,r])=>(0,t.jsx)("button",{onClick:()=>x(e),disabled:er,className:`p-4 rounded-xl border-2 transition-all disabled:opacity-50 disabled:cursor-not-allowed ${u===e?"border-purple-500 bg-purple-500/10":"border-white/10 bg-transparent hover:border-white/20"}`,children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"font-semibold text-white",children:r.symbol}),u===e&&(0,t.jsx)("svg",{className:"w-5 h-5 text-purple-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]})},e))})]}),(0,t.jsxs)("div",{className:"overflow-y-auto max-h-full",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-white/60",children:"Recipients"}),(0,t.jsxs)("div",{className:"flex items-center gap-1 p-1 bg-white/5 rounded-lg",children:[(0,t.jsx)("button",{onClick:()=>J("manual"),disabled:er,className:`px-3 py-1.5 text-xs font-medium rounded-md transition-all ${"manual"===B?"bg-purple-500/20 text-purple-400":"text-white/40 hover:text-white/60"} disabled:opacity-50`,children:"Manual"}),(0,t.jsx)("button",{onClick:()=>J("csv"),disabled:er,className:`px-3 py-1.5 text-xs font-medium rounded-md transition-all ${"csv"===B?"bg-purple-500/20 text-purple-400":"text-white/40 hover:text-white/60"} disabled:opacity-50`,children:"CSV Upload"})]})]}),"csv"===B&&(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("input",{ref:$,type:"file",accept:".csv,.txt",onChange:e=>{let t=e.target.files?.[0];if(!t)return;W(null),H(t.name);let r=new FileReader;r.onload=e=>{let t=(e=>{let t=e.trim().split("\n"),r=[],s=0,a=t[0]?.toLowerCase()||"";(a.includes("address")||a.includes("recipient")||a.includes("amount"))&&(s=1);for(let e=s;e<t.length;e++){let s=t[e].trim();if(!s)continue;let a=s.split(",").map(e=>e.trim());if(a.length<2)return{recipients:[],error:`Invalid format at line ${e+1}: expected "address,amount"`};let n=a[0],i=a[1];if(!n||56!==n.length||!n.startsWith("G"))return{recipients:[],error:`Invalid Stellar address at line ${e+1}: ${n}`};let o=parseFloat(i);if(isNaN(o)||o<=0)return{recipients:[],error:`Invalid amount at line ${e+1}: ${i}`};r.push({address:n,amount:i})}if(0===r.length)return{recipients:[],error:"No valid recipients found in CSV"};let n=l.calculateMaxRecipients();return r.length>n?{recipients:[],error:`Maximum ${n} recipients allowed per withdrawal`}:{recipients:r}})(e.target?.result);t.error?(W(t.error),b([{address:"",amount:""}])):(b(t.recipients),W(null))},r.onerror=()=>{W("Failed to read file")},r.readAsText(t),$.current&&($.current.value="")},className:"hidden"}),K?(0,t.jsx)("div",{className:"bg-white/5 border border-white/10 rounded-xl p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-purple-500/20 rounded-lg flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-5 h-5 text-purple-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-white",children:K}),(0,t.jsxs)("p",{className:"text-xs text-white/40",children:[p.filter(e=>e.address&&e.amount).length," recipients loaded"]})]})]}),(0,t.jsx)("button",{onClick:()=>{b([{address:"",amount:""}]),H(null),W(null)},disabled:er,className:"p-2 hover:bg-white/10 rounded-lg transition-colors disabled:opacity-50",children:(0,t.jsx)("svg",{className:"w-4 h-4 text-white/40",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}):(0,t.jsxs)("button",{onClick:()=>$.current?.click(),disabled:er,className:"w-full border-2 border-dashed border-white/20 hover:border-purple-500/50 rounded-xl p-6 text-center transition-all disabled:opacity-50",children:[(0,t.jsx)("svg",{className:"w-8 h-8 mx-auto mb-2 text-white/40",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,t.jsx)("p",{className:"text-sm text-white/60",children:"Click to upload CSV"}),(0,t.jsx)("p",{className:"text-xs text-white/30 mt-1",children:"Format: address,amount"})]}),O&&(0,t.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-red-500/10 border border-red-500/20 rounded-lg",children:[(0,t.jsx)("svg",{className:"w-4 h-4 text-red-400 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,t.jsx)("span",{className:"text-xs text-red-400",children:O})]}),K&&p.length>0&&!O&&(0,t.jsxs)("div",{className:"bg-white/5 border border-white/10 rounded-xl p-3 max-h-48 overflow-y-auto",children:[(0,t.jsx)("p",{className:"text-xs text-white/40 mb-2",children:"Preview:"}),(0,t.jsxs)("div",{className:"space-y-1",children:[p.slice(0,5).map((e,r)=>(0,t.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,t.jsx)("span",{className:"font-mono text-white/60 truncate max-w-[60%]",children:e.address}),(0,t.jsxs)("span",{className:"text-purple-400",children:[e.amount," ",c[u]?.symbol||"USDC"]})]},r)),p.length>5&&(0,t.jsxs)("p",{className:"text-xs text-white/30 text-center pt-1",children:["+",p.length-5," more recipients"]})]})]})]}),"manual"===B&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"flex justify-end mb-2",children:(0,t.jsx)("button",{onClick:()=>{b([...p,{address:"",amount:""}])},disabled:er||p.length>=l.calculateMaxRecipients(),className:"text-sm text-blue-400 hover:text-blue-300 transition-colors disabled:opacity-50 border border-blue-400/20 hover:border-blue-400/40 px-3 py-1.5 rounded-lg",children:"+ Add Recipient"})}),(0,t.jsx)("div",{className:"space-y-3 max-h-[160px] overflow-y-auto",children:p.map((e,r)=>(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("input",{type:"text",value:e.address,onChange:e=>G(r,"address",e.target.value),placeholder:"G...",disabled:er,className:`flex-1 bg-transparent border rounded-xl px-4 py-3 text-white placeholder-white/30 focus:outline-none focus:ring-1 transition-all disabled:opacity-50 font-mono text-sm ${e.address&&!e.address.startsWith("G")?"border-red-500/50 focus:border-red-500/50 focus:ring-red-500/50":"border-white/10 focus:border-blue-500/50 focus:ring-blue-500/50"}`}),(0,t.jsx)("input",{type:"number",value:e.amount,onChange:e=>G(r,"amount",e.target.value),placeholder:"Amount",disabled:er,className:"w-32 bg-transparent border border-white/10 rounded-xl px-4 py-3 text-white placeholder-white/30 focus:outline-none focus:border-blue-500/50 focus:ring-1 focus:ring-blue-500/50 transition-all disabled:opacity-50"}),p.length>1&&(0,t.jsx)("button",{onClick:()=>{p.length>1&&b(p.filter((e,t)=>t!==r))},disabled:er,className:"p-3 hover:bg-white/10 rounded-xl transition-colors disabled:opacity-50",children:(0,t.jsx)("svg",{className:"w-5 h-5 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},r))})]})]}),(0,t.jsxs)("div",{className:"bg-transparent border border-white/5 rounded-xl p-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-white/60",children:"Total Withdrawal"}),(0,t.jsxs)("span",{className:"text-xl font-semibold text-white",children:[X().toFixed(2)," ",c[u]?.symbol||"USDC"]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center mt-2 text-sm",children:[(0,t.jsx)("span",{className:"text-white/40",children:"Recipients"}),(0,t.jsx)("span",{className:"text-white/60",children:p.filter(Z).length})]})]}),et()&&(0,t.jsxs)("div",{className:`flex items-center gap-3 p-4 rounded-xl ${"success"===m?"bg-green-500/10 border border-green-500/20":"error"===m?"bg-red-500/10 border border-red-500/20":"bg-white/5 border border-white/10"}`,children:[er&&(0,t.jsx)("div",{className:"w-5 h-5 border-2 border-purple-500 border-t-transparent rounded-full animate-spin"}),"success"===m&&(0,t.jsx)("svg",{className:"w-5 h-5 text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"error"===m&&(0,t.jsx)("svg",{className:"w-5 h-5 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),(0,t.jsx)("span",{className:`text-sm ${"success"===m?"text-green-400":"error"===m?"text-red-400":"text-white/60"}`,children:et()})]}),j&&(0,t.jsxs)("div",{className:"bg-white/5 border border-white/10 rounded-xl p-4",children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-white/40 mb-2",children:"Request ID"}),(0,t.jsx)("code",{className:"font-mono text-sm text-purple-400 break-all",children:j})]}),(0,t.jsx)("button",{onClick:ee,disabled:!o||!d||!Q||er,className:`w-full py-4 rounded-xl font-semibold transition-all ${!o||!d||!Q||er?"bg-white/5 text-white/30 cursor-not-allowed":"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-600 text-white"}`,children:o?er?et():"Submit Private Withdrawal":"Connect Wallet First"})]})}function R(){let{walletState:e}=(0,a.useWallet)(),{address:s}=e,[n,i]=(0,r.useState)([]),[o,l]=(0,r.useState)([]),[c,d]=(0,r.useState)("deposits"),[h,u]=(0,r.useState)(!1),x=(0,r.useRef)(o);(0,r.useEffect)(()=>{x.current=o},[o]);let f=(0,r.useCallback)(async()=>{if(!s)return;let e=x.current.filter(e=>e.jobId);if(0===e.length)return;let t=e.map(e=>e.jobId);try{let e=await k(t),r=!1;if(e.jobs.forEach(e=>{var t,a,n;let i,o;t=e.jobId,a=e.status,n=e.txHash,i=A(s),(o=Object.values(i.withdrawals).find(e=>e.jobId===t||e.requestId===t))&&(o.status=a,n&&(o.txHash=n),i.withdrawals[o.requestId]=o,C(i)),r=!0}),r){let e=E(s);l(e),x.current=e}}catch(e){console.error("Error polling job statuses:",e)}},[s]);(0,r.useEffect)(()=>{if(!s)return;(async()=>{u(!0);try{let e=await y(s);i(e)}catch(e){console.error("Failed to load deposits:",e)}finally{u(!1)}})();let e=E(s);l(e),x.current=e,f()},[s]),(0,r.useEffect)(()=>{if(!s)return;let e=setInterval(f,18e4);return()=>clearInterval(e)},[s,f]);let p=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),b=e=>{switch(e){case"confirmed":case"completed":return"text-green-400 bg-green-500/10 border-green-500/20";case"pending":case"processing":return"text-amber-400 bg-amber-500/10 border-amber-500/20";case"failed":return"text-red-400 bg-red-500/10 border-red-500/20";default:return"text-white/40 bg-white/10 border-white/10"}};if(!s)return(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-full bg-white/5 flex items-center justify-center mb-4",children:(0,t.jsx)("svg",{className:"w-8 h-8 text-white/20",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,t.jsx)("p",{className:"text-white/60 font-medium",children:"Wallet Not Connected"}),(0,t.jsx)("p",{className:"text-white/30 text-xs mt-1",children:"Connect to view your history"})]});let m="deposits"===c?0===n.length:0===o.length;return(0,t.jsxs)("div",{className:"flex flex-col h-full",children:[(0,t.jsxs)("div",{className:"flex p-1 bg-white/5 rounded-xl mb-4",children:[(0,t.jsx)("button",{onClick:()=>d("deposits"),className:`flex-1 py-2 text-xs font-medium rounded-lg transition-all ${"deposits"===c?"bg-white/10 text-white shadow-sm":"text-white/40 hover:text-white/60"}`,children:"Deposits"}),(0,t.jsx)("button",{onClick:()=>d("withdrawals"),className:`flex-1 py-2 text-xs font-medium rounded-lg transition-all ${"withdrawals"===c?"bg-white/10 text-white shadow-sm":"text-white/40 hover:text-white/60"}`,children:"Withdrawals"})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto pr-2 -mr-2 space-y-3 scrollbar-hide",children:[h&&"deposits"===c&&(0,t.jsx)("div",{className:"text-center py-8 text-white/30 text-xs animate-pulse",children:"Loading deposits..."}),!h&&m&&(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-full bg-white/5 flex items-center justify-center mb-3",children:(0,t.jsx)("svg",{className:"w-6 h-6 text-white/20",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),(0,t.jsxs)("p",{className:"text-white/40 text-sm",children:["No ",c," found"]})]}),"deposits"===c&&n.map(e=>(0,t.jsxs)("div",{className:"group bg-white/5 hover:bg-white/10 border border-white/5 hover:border-white/10 rounded-2xl p-4 transition-all duration-300",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-full bg-indigo-500/20 flex items-center justify-center border border-indigo-500/20 group-hover:scale-110 transition-transform",children:(0,t.jsx)("svg",{className:"w-4 h-4 text-indigo-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 10l7-7m0 0l7 7m-7-7v18"})})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"text-white font-semibold text-sm",children:[e.amount," ",(0,t.jsx)("span",{className:"text-white/50 text-xs",children:e.token?.toUpperCase()})]}),(0,t.jsx)("div",{className:"text-white/30 text-[10px]",children:p(e.timestamp)})]})]}),(0,t.jsx)("span",{className:`px-2 py-0.5 rounded-full text-[10px] uppercase tracking-wider font-bold border ${b(e.status)}`,children:e.status})]}),(0,t.jsxs)("div",{className:"space-y-1.5 pt-2 border-t border-white/5",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center text-xs",children:[(0,t.jsx)("span",{className:"text-white/30",children:"Hash"}),(0,t.jsxs)("span",{className:"text-white/50 font-mono text-[10px] bg-black/20 px-1.5 py-0.5 rounded",children:[e.hashLN.slice(0,12),"..."]})]}),e.txHash&&(0,t.jsxs)("div",{className:"flex justify-between items-center text-xs",children:[(0,t.jsx)("span",{className:"text-white/30",children:"Tx"}),(0,t.jsxs)("a",{href:`https://stellar.expert/explorer/testnet/tx/${e.txHash}`,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-400 hover:text-indigo-300 font-mono text-[10px] flex items-center gap-1",children:[e.txHash.slice(0,8),"...",(0,t.jsx)("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})]})]})]},e.hashLN)),"withdrawals"===c&&o.map(e=>(0,t.jsxs)("div",{className:"group bg-white/5 hover:bg-white/10 border border-white/5 hover:border-white/10 rounded-2xl p-4 transition-all duration-300",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-full bg-purple-500/20 flex items-center justify-center border border-purple-500/20 group-hover:scale-110 transition-transform",children:(0,t.jsx)("svg",{className:"w-4 h-4 text-purple-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"text-white font-semibold text-sm",children:[e.totalAmount," ",(0,t.jsx)("span",{className:"text-white/50 text-xs",children:e.token?.toUpperCase()})]}),(0,t.jsx)("div",{className:"text-white/30 text-[10px]",children:p(e.timestamp)})]})]}),(0,t.jsx)("span",{className:`px-2 py-0.5 rounded-full text-[10px] uppercase tracking-wider font-bold border ${b(e.status)}`,children:"processing"===e.status?"Processing":e.status})]}),(0,t.jsxs)("div",{className:"space-y-1.5 pt-2 border-t border-white/5",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center text-xs",children:[(0,t.jsx)("span",{className:"text-white/30",children:"Recipients"}),(0,t.jsx)("span",{className:"text-white/60 font-mono",children:Object.keys(e.recipients).length})]}),e.txHash?(0,t.jsxs)("div",{className:"flex justify-between items-center text-xs",children:[(0,t.jsx)("span",{className:"text-white/30",children:"Tx"}),(0,t.jsxs)("a",{href:`https://stellar.expert/explorer/testnet/tx/${e.txHash}`,target:"_blank",rel:"noopener noreferrer",className:"text-purple-400 hover:text-purple-300 font-mono text-[10px] flex items-center gap-1",children:[e.txHash.slice(0,8),"...",(0,t.jsx)("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})]}):(0,t.jsxs)("div",{className:"flex justify-between items-center text-xs",children:[(0,t.jsx)("span",{className:"text-white/30",children:"Job ID"}),(0,t.jsx)("span",{className:"text-white/40 font-mono text-[10px]",children:e.jobId?.slice(0,8)||"..."})]})]})]},e.requestId))]})]})}var T=e.i(91325);let M=r.forwardRef(({className:e,children:s,...a},n)=>{let i=r.useRef(null),[o,l]=r.useState(!1),[c,d]=r.useState([]),h=r.useRef(0),u=r.useCallback((e,t)=>{let r=e/(i.current?.offsetWidth||0),s=`linear-gradient(to right, var(--circle-start) ${100*r}%, var(--circle-end) ${100*r}%)`;d(r=>[...r,{id:Date.now(),x:e,y:t,color:s,fadeState:null}])},[]),x=r.useCallback(e=>{if(!o)return;let t=Date.now();if(t-h.current>100){h.current=t;let r=e.currentTarget.getBoundingClientRect();u(e.clientX-r.left,e.clientY-r.top)}},[o,u]),f=r.useCallback(()=>{l(!0)},[]),p=r.useCallback(()=>{l(!1)},[]);return r.useEffect(()=>{c.forEach(e=>{e.fadeState||(setTimeout(()=>{d(t=>t.map(t=>t.id===e.id?{...t,fadeState:"in"}:t))},0),setTimeout(()=>{d(t=>t.map(t=>t.id===e.id?{...t,fadeState:"out"}:t))},1e3),setTimeout(()=>{d(t=>t.filter(t=>t.id!==e.id))},2200))})},[c]),(0,t.jsxs)("button",{ref:i,className:(0,T.cn)("relative isolate px-8 py-3 rounded-3xl","text-foreground font-medium text-base leading-6","backdrop-blur-lg bg-[rgba(43,55,80,0.1)]","cursor-pointer overflow-hidden","before:content-[''] before:absolute before:inset-0","before:rounded-[inherit] before:pointer-events-none","before:z-[1]","before:shadow-[inset_0_0_0_1px_rgba(170,202,255,0.2),inset_0_0_16px_0_rgba(170,202,255,0.1),inset_0_-3px_12px_0_rgba(170,202,255,0.15),0_1px_3px_0_rgba(0,0,0,0.50),0_4px_12px_0_rgba(0,0,0,0.45)]","before:mix-blend-multiply before:transition-transform before:duration-300","active:before:scale-[0.975]",e),onPointerMove:x,onPointerEnter:f,onPointerLeave:p,...a,style:{"--circle-start":"var(--tw-gradient-from, #a0d9f8)","--circle-end":"var(--tw-gradient-to, #3a5bbf)"},children:[c.map(({id:e,x:r,y:s,color:a,fadeState:n})=>(0,t.jsx)("div",{className:(0,T.cn)("absolute w-3 h-3 -translate-x-1/2 -translate-y-1/2 rounded-full","blur-lg pointer-events-none z-[-1] transition-opacity duration-300","in"===n&&"opacity-75","out"===n&&"opacity-0 duration-[1.2s]",!n&&"opacity-0"),style:{left:r,top:s,background:a}},e)),s]})});M.displayName="HoverButton";var I=e.i(12237);function B(){let e=(0,s.useRouter)(),{walletState:n,formatAddress:i}=(0,a.useWallet)(),{isConnected:o,address:l,network:c}=n,[d,h]=(0,r.useState)("deposit");return(0,t.jsxs)("div",{className:"min-h-screen",children:[(0,t.jsx)(I.default,{className:"min-h-screen top-0",color:"#818cf8",trailOpacity:.1,speed:.8}),(0,t.jsxs)("div",{className:"absolute min-h-screen top-0 text-white font-mono flex flex-col items-center justify-center w-full p-20",children:[(0,t.jsxs)("nav",{className:"absolute top-0 left-0 w-full flex items-center justify-between py-6 px-8 lg:px-16 z-50 bg-gradient-to-b from-black/80 to-transparent pointer-events-none",children:[(0,t.jsxs)("div",{className:"flex items-center gap-x-4 pointer-events-auto",children:[(0,t.jsxs)("button",{onClick:()=>e.push("/dashboard"),className:"flex items-center gap-2 text-white/60 hover:text-white transition-colors bg-black/20 backdrop-blur-md px-4 py-2 rounded-full border border-white/5",children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),(0,t.jsxs)("a",{href:"/",className:"text-white/80 hover:text-white transition-colors flex items-center bg-black/20 backdrop-blur-md px-4 py-2 rounded-full border border-white/5",children:[(0,t.jsx)("img",{src:"/Tess-W.png",alt:"Tesseract",className:"h-7 w-7 inline-block mr-2"}),(0,t.jsx)("span",{className:"hidden sm:inline font-mono",children:"TESSERACT"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4 pointer-events-auto",children:[(0,t.jsx)(a.NetworkBadge,{}),(0,t.jsx)(a.ConnectWalletButton,{})]})]}),(0,t.jsx)("div",{className:"px-4 md:px-8 font-mono max-w-7xl mx-auto",children:(0,t.jsxs)("div",{className:"mx-auto",children:[(0,t.jsxs)("div",{className:"text-center mb-8 mt-8",children:[(0,t.jsx)("h1",{className:"text-2xl md:text-4xl lg:text-5xl font-bold tracking-tighter text-white mb-6 drop-shadow-2xl",children:(0,t.jsx)("span",{className:"text-transparent bg-clip-text bg-gradient-to-b from-white to-muted font-mono",children:"Privacy"})}),(0,t.jsx)("p",{className:"text-xs md:text-sm lg:text-md font-italic tracking-tighter text-white/46 mb-6 drop-shadow-2xl",children:"Deposit and withdraw funds with complete privacy. Your transaction details are encrypted and your operations are end to end encrypted."})]}),(0,t.jsxs)("div",{className:"flex flex-row gap-5 max-w-5xl mx-auto",children:[(0,t.jsxs)("div",{className:"space-y-4 max-w-3xl min-w-xl",children:[(0,t.jsxs)("div",{className:"flex gap-2 p-1 bg-white/5 rounded-xl",children:[(0,t.jsxs)(M,{onClick:()=>h("deposit"),className:`flex-1 flex items-center justify-center gap-2 py-2.5 px-4 rounded-2xl font-medium transition-all ${"deposit"===d?"bg-white text-black":"text-white/60 hover:text-white hover:bg-white/5"}`,children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})}),"Deposit"]}),(0,t.jsxs)(M,{onClick:()=>h("withdraw"),className:`flex-1 flex items-center justify-center gap-2 py-2.5 px-4 rounded-2xl font-medium transition-all ${"withdraw"===d?"bg-white text-black":"text-white/60 hover:text-white hover:bg-white/5"}`,children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 10l7-7m0 0l7 7m-7-7v18"})}),"Withdraw"]})]}),(0,t.jsx)("div",{className:" backdrop-blur-lg border border-white/10 rounded-2xl p-6  ",children:"deposit"===d?(0,t.jsx)(L,{}):(0,t.jsx)(P,{})})]}),(0,t.jsx)("div",{className:"space-y-4 max-w-2xl min-w-lg flex flex-col justify-center ",children:(0,t.jsxs)("div",{className:"bg-transparent backdrop-blur-md border border-white/5 rounded-2xl p-6",children:[(0,t.jsx)("h3",{className:"text-md font-semibold mb-4",children:"Your Activity"}),(0,t.jsx)(R,{})]})})]})]})})]})]})}function D(){return(0,t.jsx)(a.WalletProvider,{children:(0,t.jsx)(B,{})})}e.s(["default",()=>D],23014)}]);