{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/kaushalchaudhari/Desktop/Tesseract-Client/tesseract-client/app/services/walletService.ts"],"sourcesContent":["/**\n * Wallet Service for Stellar/Soroban integration\n *\n * This service provides a unified interface for wallet operations using the Freighter wallet.\n *\n * References:\n * - Freighter API: https://docs.freighter.app/docs/guide/usingfreighterwebapp/\n * - Sign Auth Entries: https://developers.stellar.org/docs/build/guides/freighter/sign-auth-entries\n */\n\nimport {\n    isConnected,\n    isAllowed,\n    setAllowed,\n    requestAccess,\n    getAddress,\n    getNetworkDetails,\n    signAuthEntry,\n    signTransaction,\n} from '@stellar/freighter-api';\n\n// ==================== TYPE DEFINITIONS ====================\n\nexport interface WalletState {\n    isInstalled: boolean;\n    isConnected: boolean;\n    isAllowed: boolean;\n    address: string | null;\n    network: NetworkInfo | null;\n}\n\nexport interface NetworkInfo {\n    network: string;\n    networkPassphrase: string;\n    networkUrl?: string;\n}\n\nexport interface SignAuthEntryResult {\n    signedAuthEntry: string;\n    signerAddress: string;\n}\n\nexport interface WalletError {\n    code: WalletErrorCode;\n    message: string;\n}\n\nexport enum WalletErrorCode {\n    NOT_INSTALLED = 'NOT_INSTALLED',\n    NOT_ALLOWED = 'NOT_ALLOWED',\n    USER_REJECTED = 'USER_REJECTED',\n    NETWORK_MISMATCH = 'NETWORK_MISMATCH',\n    SIGNING_FAILED = 'SIGNING_FAILED',\n    UNKNOWN = 'UNKNOWN',\n}\n\n// ==================== WALLET SERVICE CLASS ====================\n\nexport class WalletService {\n    private static instance: WalletService;\n\n    private constructor() {}\n\n    /**\n     * Get singleton instance of WalletService\n     */\n    static getInstance(): WalletService {\n        if (!WalletService.instance) {\n            WalletService.instance = new WalletService();\n        }\n        return WalletService.instance;\n    }\n\n    /**\n     * Check if Freighter extension is installed in the browser\n     */\n    async isFreighterInstalled(): Promise<boolean> {\n        try {\n            const result = await isConnected();\n            return result.isConnected;\n        } catch (error) {\n            console.error('Error checking Freighter installation:', error);\n            return false;\n        }\n    }\n\n    /**\n     * Check if the app has been previously allowed by the user\n     */\n    async isAppAllowed(): Promise<boolean> {\n        try {\n            const result = await isAllowed();\n            return result.isAllowed;\n        } catch (error) {\n            console.error('Error checking app permission:', error);\n            return false;\n        }\n    }\n\n    /**\n     * Request app permission from the user\n     * This adds the app to Freighter's allow list\n     */\n    async requestPermission(): Promise<boolean> {\n        try {\n            const result = await setAllowed();\n            return result.isAllowed;\n        } catch (error) {\n            console.error('Error requesting permission:', error);\n            return false;\n        }\n    }\n\n    /**\n     * Connect to the wallet and get the user's public key\n     * This will prompt the user to authorize the app if not already allowed\n     */\n    async connect(): Promise<{ address: string } | WalletError> {\n        try {\n            // First check if Freighter is installed\n            const installed = await this.isFreighterInstalled();\n            if (!installed) {\n                return {\n                    code: WalletErrorCode.NOT_INSTALLED,\n                    message: 'Freighter wallet is not installed. Please install it from https://freighter.app',\n                };\n            }\n\n            // Request access (this prompts the user if not already allowed)\n            const accessResult = await requestAccess();\n\n            if (accessResult.error) {\n                // User rejected or other error\n                return {\n                    code: WalletErrorCode.USER_REJECTED,\n                    message: accessResult.error.message || 'User rejected the connection request',\n                };\n            }\n\n            return { address: accessResult.address };\n        } catch (error: any) {\n            console.error('Error connecting to wallet:', error);\n            return {\n                code: WalletErrorCode.UNKNOWN,\n                message: error.message || 'Failed to connect to wallet',\n            };\n        }\n    }\n\n    /**\n     * Get the currently connected address (without prompting)\n     * Returns null if not connected\n     */\n    async getConnectedAddress(): Promise<string | null> {\n        try {\n            const allowed = await this.isAppAllowed();\n            if (!allowed) {\n                return null;\n            }\n\n            const result = await getAddress();\n            if (result.error) {\n                return null;\n            }\n\n            return result.address;\n        } catch (error) {\n            console.error('Error getting address:', error);\n            return null;\n        }\n    }\n\n    /**\n     * Get the current network information from Freighter\n     */\n    async getNetworkInfo(): Promise<NetworkInfo | null> {\n        try {\n            const result = await getNetworkDetails();\n            if (result.error) {\n                return null;\n            }\n\n            return {\n                network: result.network,\n                networkPassphrase: result.networkPassphrase,\n                networkUrl: result.networkUrl,\n            };\n        } catch (error) {\n            console.error('Error getting network info:', error);\n            return null;\n        }\n    }\n\n    /**\n     * Sign an authorization entry for Soroban contract calls\n     * This is used for the batch payment authorization tree\n     *\n     * @param authEntryPreimageXdr - The XDR string of the HashIdPreimageSorobanAuthorization\n     * @param address - Optional: specific address to sign with\n     * @returns The signed authorization entry as base64 string\n     */\n    async signAuthEntry(\n        authEntryPreimageXdr: string,\n        address?: string\n    ): Promise<SignAuthEntryResult | WalletError> {\n        try {\n            const options: { address?: string } = {};\n            if (address) {\n                options.address = address;\n            }\n\n            const result = await signAuthEntry(authEntryPreimageXdr, options);\n\n            if (result.error) {\n                return {\n                    code: WalletErrorCode.SIGNING_FAILED,\n                    message: result.error.message || 'Failed to sign authorization entry',\n                };\n            }\n\n            return {\n                signedAuthEntry: result.signedAuthEntry || '',\n                signerAddress: result.signerAddress || address || '',\n            };\n        } catch (error: any) {\n            console.error('Error signing auth entry:', error);\n\n            // Check for user rejection\n            if (error.message?.includes('User declined')) {\n                return {\n                    code: WalletErrorCode.USER_REJECTED,\n                    message: 'User declined to sign the authorization entry',\n                };\n            }\n\n            return {\n                code: WalletErrorCode.SIGNING_FAILED,\n                message: error.message || 'Failed to sign authorization entry',\n            };\n        }\n    }\n\n    /**\n     * Sign a transaction XDR\n     *\n     * @param transactionXdr - The XDR string of the transaction\n     * @param network - Network name (TESTNET, PUBLIC, etc.)\n     * @param address - Optional: specific address to sign with\n     * @returns The signed transaction XDR\n     */\n    async signTransaction(\n        transactionXdr: string,\n        network: string = 'TESTNET',\n        address?: string\n    ): Promise<string | WalletError> {\n        try {\n            const options: { network?: string; address?: string; networkPassphrase?: string } = {\n                network,\n            };\n\n            if (address) {\n                options.address = address;\n            }\n\n            const result = await signTransaction(transactionXdr, options);\n\n            if (result.error) {\n                return {\n                    code: WalletErrorCode.SIGNING_FAILED,\n                    message: result.error.message || 'Failed to sign transaction',\n                };\n            }\n\n            return result.signedTxXdr;\n        } catch (error: any) {\n            console.error('Error signing transaction:', error);\n\n            if (error.message?.includes('User declined')) {\n                return {\n                    code: WalletErrorCode.USER_REJECTED,\n                    message: 'User declined to sign the transaction',\n                };\n            }\n\n            return {\n                code: WalletErrorCode.SIGNING_FAILED,\n                message: error.message || 'Failed to sign transaction',\n            };\n        }\n    }\n\n    /**\n     * Get the full wallet state\n     */\n    async getWalletState(): Promise<WalletState> {\n        const isInstalled = await this.isFreighterInstalled();\n\n        if (!isInstalled) {\n            return {\n                isInstalled: false,\n                isConnected: false,\n                isAllowed: false,\n                address: null,\n                network: null,\n            };\n        }\n\n        const allowed = await this.isAppAllowed();\n\n        if (!allowed) {\n            return {\n                isInstalled: true,\n                isConnected: false,\n                isAllowed: false,\n                address: null,\n                network: null,\n            };\n        }\n\n        const address = await this.getConnectedAddress();\n        const network = await this.getNetworkInfo();\n\n        return {\n            isInstalled: true,\n            isConnected: !!address,\n            isAllowed: true,\n            address,\n            network,\n        };\n    }\n\n    /**\n     * Verify the user is on the expected network\n     */\n    async verifyNetwork(expectedPassphrase: string): Promise<boolean> {\n        const networkInfo = await this.getNetworkInfo();\n        if (!networkInfo) {\n            return false;\n        }\n        return networkInfo.networkPassphrase === expectedPassphrase;\n    }\n}\n\n// Export singleton instance\nexport const walletService = WalletService.getInstance();\n\n// Helper function to check if a result is an error\nexport function isWalletError(result: any): result is WalletError {\n    return result && typeof result === 'object' && 'code' in result && 'message' in result;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 281, "column": 0}, "map": {"version":3,"sources":["file:///Users/kaushalchaudhari/Desktop/Tesseract-Client/tesseract-client/app/contexts/WalletContext.tsx"],"sourcesContent":["'use client';\n\nimport React, { createContext, useContext, useState, useEffect, useCallback, ReactNode } from 'react';\nimport {\n    walletService,\n    WalletState,\n    WalletError,\n    WalletErrorCode,\n    isWalletError,\n    NetworkInfo,\n    SignAuthEntryResult,\n} from '../services/walletService';\n\n// ==================== CONTEXT TYPES ====================\n\ninterface WalletContextType {\n    // State\n    walletState: WalletState;\n    isLoading: boolean;\n    error: WalletError | null;\n\n    // Actions\n    connect: () => Promise<boolean>;\n    disconnect: () => void;\n    refreshState: () => Promise<void>;\n\n    // Signing\n    signAuthEntry: (authEntryPreimageXdr: string) => Promise<SignAuthEntryResult | WalletError>;\n\n    // Utilities\n    formatAddress: (address: string) => string;\n    isTestnet: () => boolean;\n}\n\nconst defaultWalletState: WalletState = {\n    isInstalled: false,\n    isConnected: false,\n    isAllowed: false,\n    address: null,\n    network: null,\n};\n\n// ==================== CONTEXT ====================\n\nconst WalletContext = createContext<WalletContextType | undefined>(undefined);\n\n// ==================== PROVIDER ====================\n\ninterface WalletProviderProps {\n    children: ReactNode;\n}\n\nexport function WalletProvider({ children }: WalletProviderProps) {\n    const [walletState, setWalletState] = useState<WalletState>(defaultWalletState);\n    const [isLoading, setIsLoading] = useState(true);\n    const [error, setError] = useState<WalletError | null>(null);\n\n    /**\n     * Refresh the wallet state from Freighter\n     */\n    const refreshState = useCallback(async () => {\n        try {\n            const state = await walletService.getWalletState();\n            setWalletState(state);\n            setError(null);\n        } catch (err: any) {\n            console.error('Error refreshing wallet state:', err);\n            setError({\n                code: WalletErrorCode.UNKNOWN,\n                message: err.message || 'Failed to refresh wallet state',\n            });\n        }\n    }, []);\n\n    /**\n     * Initial load of wallet state\n     */\n    useEffect(() => {\n        const initialize = async () => {\n            setIsLoading(true);\n            await refreshState();\n            setIsLoading(false);\n        };\n\n        // Only run in browser\n        if (typeof window !== 'undefined') {\n            initialize();\n        } else {\n            setIsLoading(false);\n        }\n    }, [refreshState]);\n\n    /**\n     * Listen for account changes in Freighter\n     * Note: This requires Freighter to emit events, which may not be available in all versions\n     */\n    useEffect(() => {\n        if (typeof window === 'undefined') return;\n\n        // Poll for changes every 5 seconds if connected\n        let pollInterval: NodeJS.Timeout | null = null;\n\n        if (walletState.isConnected) {\n            pollInterval = setInterval(async () => {\n                const currentAddress = await walletService.getConnectedAddress();\n                if (currentAddress !== walletState.address) {\n                    await refreshState();\n                }\n            }, 5000);\n        }\n\n        return () => {\n            if (pollInterval) {\n                clearInterval(pollInterval);\n            }\n        };\n    }, [walletState.isConnected, walletState.address, refreshState]);\n\n    /**\n     * Connect to the wallet\n     */\n    const connect = useCallback(async (): Promise<boolean> => {\n        setIsLoading(true);\n        setError(null);\n\n        try {\n            const result = await walletService.connect();\n\n            if (isWalletError(result)) {\n                setError(result);\n                setIsLoading(false);\n                return false;\n            }\n\n            // Successfully connected, refresh state\n            await refreshState();\n            setIsLoading(false);\n            return true;\n        } catch (err: any) {\n            console.error('Error connecting wallet:', err);\n            setError({\n                code: WalletErrorCode.UNKNOWN,\n                message: err.message || 'Failed to connect wallet',\n            });\n            setIsLoading(false);\n            return false;\n        }\n    }, [refreshState]);\n\n    /**\n     * Disconnect from the wallet (client-side only, doesn't revoke permission)\n     */\n    const disconnect = useCallback(() => {\n        setWalletState({\n            ...walletState,\n            isConnected: false,\n            address: null,\n        });\n        setError(null);\n    }, [walletState]);\n\n    /**\n     * Sign an authorization entry\n     */\n    const signAuthEntry = useCallback(\n        async (authEntryPreimageXdr: string): Promise<SignAuthEntryResult | WalletError> => {\n            if (!walletState.isConnected || !walletState.address) {\n                return {\n                    code: WalletErrorCode.NOT_ALLOWED,\n                    message: 'Wallet not connected',\n                };\n            }\n\n            return walletService.signAuthEntry(authEntryPreimageXdr, walletState.address);\n        },\n        [walletState.isConnected, walletState.address]\n    );\n\n    /**\n     * Format address for display (truncate middle)\n     */\n    const formatAddress = useCallback((address: string): string => {\n        if (!address || address.length < 10) return address;\n        return `${address.slice(0, 4)}...${address.slice(-4)}`;\n    }, []);\n\n    /**\n     * Check if connected to testnet\n     */\n    const isTestnet = useCallback((): boolean => {\n        if (!walletState.network) return false;\n        return walletState.network.network === 'TESTNET' ||\n            walletState.network.networkPassphrase.includes('Test SDF Network');\n    }, [walletState.network]);\n\n    const value: WalletContextType = {\n        walletState,\n        isLoading,\n        error,\n        connect,\n        disconnect,\n        refreshState,\n        signAuthEntry,\n        formatAddress,\n        isTestnet,\n    };\n\n    return <WalletContext.Provider value={value}>{children}</WalletContext.Provider>;\n}\n\n// ==================== HOOK ====================\n\nexport function useWallet(): WalletContextType {\n    const context = useContext(WalletContext);\n    if (context === undefined) {\n        throw new Error('useWallet must be used within a WalletProvider');\n    }\n    return context;\n}\n\n// ==================== UTILITY COMPONENTS ====================\n\ninterface ConnectWalletButtonProps {\n    className?: string;\n    onConnect?: () => void;\n    onError?: (error: WalletError) => void;\n}\n\nexport function ConnectWalletButton({ className = '', onConnect, onError }: ConnectWalletButtonProps) {\n    const { walletState, isLoading, error, connect, disconnect, formatAddress } = useWallet();\n\n    const handleClick = async () => {\n        if (walletState.isConnected) {\n            disconnect();\n        } else {\n            const success = await connect();\n            if (success) {\n                onConnect?.();\n            } else if (error) {\n                onError?.(error);\n            }\n        }\n    };\n\n    if (!walletState.isInstalled) {\n        return (\n            <a\n                href=\"https://freighter.app\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className={`inline-flex items-center gap-2 px-4 py-2 bg-white text-black rounded-lg font-medium text-sm hover:bg-white/90 transition-colors ${className}`}\n            >\n                <svg className=\"w-4 h-4\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4\" />\n                </svg>\n                Install Freighter\n            </a>\n        );\n    }\n\n    if (walletState.isConnected && walletState.address) {\n        return (\n            <div className=\"flex items-center gap-3\">\n                <div className=\"flex items-center gap-2 px-3 py-2 bg-white/5 rounded-lg border border-white/10\">\n                    <div className=\"w-2 h-2 rounded-full bg-green-500\" />\n                    <span className=\"text-sm text-white/80 font-mono\">\n                        {formatAddress(walletState.address)}\n                    </span>\n                </div>\n                <button\n                    onClick={handleClick}\n                    className=\"px-3 py-2 text-sm text-white/50 hover:text-white transition-colors\"\n                >\n                    Disconnect\n                </button>\n            </div>\n        );\n    }\n\n    return (\n        <button\n            onClick={handleClick}\n            disabled={isLoading}\n            className={`inline-flex items-center gap-2 px-4 py-2 bg-white text-black rounded-lg font-medium text-sm hover:bg-white/90 transition-colors disabled:opacity-50 ${className}`}\n        >\n            {isLoading ? (\n                <>\n                    <svg className=\"w-4 h-4 animate-spin\" fill=\"none\" viewBox=\"0 0 24 24\">\n                        <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\" />\n                        <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\" />\n                    </svg>\n                    Connecting...\n                </>\n            ) : (\n                'Connect Wallet'\n            )}\n        </button>\n    );\n}\n\n// Network badge component\nexport function NetworkBadge() {\n    const { walletState, isTestnet } = useWallet();\n\n    if (!walletState.network) return null;\n\n    const isTest = isTestnet();\n\n    return (\n        <div className={`flex items-center gap-2 text-sm ${isTest ? 'text-yellow-400' : 'text-green-400'}`}>\n            <div className={`w-2 h-2 rounded-full ${isTest ? 'bg-yellow-500' : 'bg-green-500'} animate-pulse`} />\n            <span>{isTest ? 'Testnet' : 'Mainnet'}</span>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 623, "column": 0}, "map": {"version":3,"sources":["turbopack:///[next]/internal/font/google/lexend_tera_c343b42e.module.css [app-ssr] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"className\": \"lexend_tera_c343b42e-module__33zOOW__className\",\n  \"variable\": \"lexend_tera_c343b42e-module__33zOOW__variable\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA","ignoreList":[0]}},
    {"offset": {"line": 631, "column": 0}, "map": {"version":3,"sources":["turbopack:///[next]/internal/font/google/lexend_tera_c343b42e.js"],"sourcesContent":["import cssModule from \"@vercel/turbopack-next/internal/font/google/cssmodule.module.css?{%22path%22:%22Fonts.ts%22,%22import%22:%22Lexend_Tera%22,%22arguments%22:[{%22subsets%22:[%22latin%22],%22weight%22:[%22400%22,%22700%22],%22variable%22:%22--font-lexend-tera%22}],%22variableName%22:%22lexendTera%22}\";\nconst fontData = {\n    className: cssModule.className,\n    style: {\n        fontFamily: \"'Lexend Tera', 'Lexend Tera Fallback'\",\n        fontStyle: \"normal\",\n\n    },\n};\n\nif (cssModule.variable != null) {\n    fontData.variable = cssModule.variable;\n}\n\nexport default fontData;\n"],"names":[],"mappings":";;;;AAAA;;AACA,MAAM,WAAW;IACb,WAAW,sKAAS,CAAC,SAAS;IAC9B,OAAO;QACH,YAAY;QACZ,WAAW;IAEf;AACJ;AAEA,IAAI,sKAAS,CAAC,QAAQ,IAAI,MAAM;IAC5B,SAAS,QAAQ,GAAG,sKAAS,CAAC,QAAQ;AAC1C;uCAEe","ignoreList":[0]}},
    {"offset": {"line": 652, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 765, "column": 0}, "map": {"version":3,"sources":["file:///Users/kaushalchaudhari/Desktop/Tesseract-Client/tesseract-client/app/services/privacyPayService.ts"],"sourcesContent":["/**\n * Privacy Pay Service\n *\n * Handles deposit transactions (on-chain) and withdrawal requests (API + encryption)\n */\n\nimport {\n  Keypair,\n  rpc,\n  TransactionBuilder,\n  Account,\n  nativeToScVal,\n  Contract,\n  Networks,\n} from '@stellar/stellar-sdk';\nimport nacl from 'tweetnacl';\n\n// ============================================================================\n// Configuration\n// ============================================================================\n\nconst CONFIG = {\n  SOROBAN_RPC_URL: process.env.NEXT_PUBLIC_SOROBAN_RPC_URL || 'https://soroban-testnet.stellar.org',\n  NETWORK_PASSPHRASE: process.env.NEXT_PUBLIC_NETWORK_PASSPHRASE || Networks.TESTNET,\n  TREASURY_CONTRACT_ID: process.env.NEXT_PUBLIC_TREASURY_CONTRACT_ID || '',\n  IDM_CONTRACT_ID: process.env.NEXT_PUBLIC_IDM_CONTRACT_ID || '',\n  ASSET_ADDRESS: process.env.NEXT_PUBLIC_ASSET_ADDRESS || '',\n  RELAYER_URL: process.env.NEXT_PUBLIC_RELAYER_URL || 'http://localhost:3000/api/relayer',\n  DISTRIBUTOR_RSA_PUBLIC_KEY: process.env.NEXT_PUBLIC_DISTRIBUTOR_RSA_PUBLIC_KEY || '',\n  RELAYER_NACL_PUBLIC_KEY: process.env.NEXT_PUBLIC_RELAYER_NACL_PUBLIC_KEY || '',\n};\n\nconst BASE_FEE = '100';\n\n// ============================================================================\n// Types\n// ============================================================================\n\nexport interface DepositParams {\n  depositorAddress: string;\n  hashLN: string;\n  amount: number; // in USDC (will be converted to stroops)\n}\n\nexport interface DepositResult {\n  success: boolean;\n  txXdr?: string;\n  txHash?: string;\n  identity?: string;\n  error?: string;\n}\n\nexport interface WithdrawParams {\n  hashLN: string;\n  recipients: Record<string, string>; // address -> amount as string\n  senderPublicKey: string;\n  senderRawPublicKey: Uint8Array; // Raw 32-byte public key\n}\n\nexport interface WithdrawResult {\n  success: boolean;\n  requestId?: string;\n  jobId?: string;\n  senderIdentity?: string;\n  error?: string;\n}\n\nexport interface PrivacyPayDeposit {\n  hashLN: string;\n  identity: string;\n  amount: number;\n  txHash: string;\n  timestamp: number;\n  status: 'pending' | 'confirmed' | 'failed';\n}\n\nexport interface PrivacyPayWithdrawal {\n  requestId: string;\n  jobId?: string;\n  hashLN: string;\n  totalAmount: number;\n  recipients: Record<string, string>;\n  timestamp: number;\n  status: 'pending' | 'processing' | 'completed' | 'failed';\n  txHash?: string;\n  senderIdentity?: string;\n}\n\nexport interface PrivacyPaySession {\n  walletAddress: string;\n  deposits: Record<string, PrivacyPayDeposit>;\n  withdrawals: Record<string, PrivacyPayWithdrawal>;\n}\n\n// ============================================================================\n// Base64 Utility Functions\n// ============================================================================\n\nfunction encodeBase64(arr: Uint8Array): string {\n  return btoa(String.fromCharCode(...arr));\n}\n\nfunction decodeBase64(s: string): Uint8Array {\n  return Uint8Array.from(atob(s), c => c.charCodeAt(0));\n}\n\n// ============================================================================\n// Utility Functions\n// ============================================================================\n\n/**\n * Generate hashLN from ledger number and wallet nonce\n * hashLN = SHA256(L || N) truncated to 32 hex chars\n */\nexport async function generateHashLN(ledgerNumber: number, walletNonce: number): Promise<string> {\n  const combined = `${ledgerNumber}${walletNonce}`;\n  const encoder = new TextEncoder();\n  const data = encoder.encode(combined);\n  const hashBuffer = await crypto.subtle.digest('SHA-256', data);\n  const hashArray = Array.from(new Uint8Array(hashBuffer));\n  const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');\n  return hashHex.slice(0, 32);\n}\n\n/**\n * Derive identity from hashLN and depositor address\n * Matches the Treasury contract logic\n */\nexport async function deriveIdentity(hashLN: string, depositorAddress: string): Promise<string> {\n  const combined = hashLN + depositorAddress;\n  const encoder = new TextEncoder();\n  const data = encoder.encode(combined);\n  const hashBuffer = await crypto.subtle.digest('SHA-256', data);\n  const hashArray = new Uint8Array(hashBuffer);\n  // Use first 16 bytes as identity (matches contract)\n  const identity = btoa(String.fromCharCode(...hashArray.slice(0, 16)));\n  return identity;\n}\n\n/**\n * Get current ledger number from Stellar\n */\nexport async function getCurrentLedger(): Promise<number> {\n  const rpcServer = new rpc.Server(CONFIG.SOROBAN_RPC_URL);\n  const health = await rpcServer.getHealth();\n  return health.latestLedger;\n}\n\n/**\n * Generate a random nonce for the wallet\n */\nexport function generateWalletNonce(): number {\n  return Math.floor(Math.random() * 1000000000);\n}\n\n// ============================================================================\n// Deposit Functions (On-Chain)\n// ============================================================================\n\n/**\n * Check if account exists and has sufficient balance\n */\nexport async function checkAccountStatus(address: string): Promise<{\n  exists: boolean;\n  hasAsset: boolean;\n  balance?: number;\n  error?: string;\n}> {\n  try {\n    const rpcServer = new rpc.Server(CONFIG.SOROBAN_RPC_URL);\n\n    // Check if account exists\n    try {\n      await rpcServer.getAccount(address);\n    } catch (e: any) {\n      if (e.message?.includes('Not Found') || e.code === 404) {\n        return { exists: false, hasAsset: false, error: 'Account does not exist. Please fund your wallet first.' };\n      }\n      throw e;\n    }\n\n    // For now, just return exists = true\n    // TODO: Add asset balance check if needed\n    return { exists: true, hasAsset: true };\n  } catch (error: any) {\n    return { exists: false, hasAsset: false, error: error.message };\n  }\n}\n\n/**\n * Build deposit transaction for signing with Freighter\n */\nexport async function buildDepositTransaction(params: DepositParams): Promise<string> {\n  const { depositorAddress, hashLN, amount } = params;\n\n  if (!CONFIG.TREASURY_CONTRACT_ID || !CONFIG.ASSET_ADDRESS) {\n    throw new Error('Missing required contract IDs. Check environment variables.');\n  }\n\n  // Log hashLN details to verify format\n  console.log('[PrivacyPay Deposit] hashLN:', hashLN);\n  console.log('[PrivacyPay Deposit] hashLN type:', typeof hashLN);\n  console.log('[PrivacyPay Deposit] hashLN length:', hashLN.length);\n  console.log('[PrivacyPay Deposit] Building deposit transaction:', {\n    depositorAddress,\n    hashLN,\n    amount,\n    treasuryContract: CONFIG.TREASURY_CONTRACT_ID,\n    assetAddress: CONFIG.ASSET_ADDRESS,\n    networkPassphrase: CONFIG.NETWORK_PASSPHRASE,\n  });\n\n  const rpcServer = new rpc.Server(CONFIG.SOROBAN_RPC_URL);\n\n  // Check account status first\n  const accountStatus = await checkAccountStatus(depositorAddress);\n  if (!accountStatus.exists) {\n    throw new Error(accountStatus.error || 'Account does not exist');\n  }\n\n  // Load account from Stellar\n  const account = await rpcServer.getAccount(depositorAddress);\n  console.log('[PrivacyPay] Account loaded, sequence:', account.sequenceNumber());\n\n  // Create treasury contract instance\n  const treasuryContract = new Contract(CONFIG.TREASURY_CONTRACT_ID);\n\n  // Convert amount to stroops (7 decimals)\n  const amountInStroops = Math.floor(amount * 10_000_000);\n  console.log('[PrivacyPay] Amount in stroops:', amountInStroops);\n\n  // Build transaction\n  const transaction = new TransactionBuilder(\n    new Account(depositorAddress, account.sequenceNumber()),\n    {\n      fee: BASE_FEE,\n      networkPassphrase: CONFIG.NETWORK_PASSPHRASE,\n    }\n  )\n    .addOperation(\n      treasuryContract.call(\n        'deposit',\n        nativeToScVal(depositorAddress, { type: 'address' }),\n        nativeToScVal(hashLN, { type: 'string' }),\n        nativeToScVal(amountInStroops, { type: 'i128' })\n      )\n    )\n    .setTimeout(30)\n    .build();\n\n  console.log('[PrivacyPay] Transaction built, simulating...');\n\n  // Simulate to get resource requirements\n  const simulateResponse = await rpcServer.simulateTransaction(transaction);\n\n  console.log('[PrivacyPay] Simulation response:', JSON.stringify(simulateResponse, null, 2));\n\n  if (rpc.Api.isSimulationError(simulateResponse)) {\n    // Extract more detailed error info\n    const errorDetails = (simulateResponse as any).error || 'Unknown simulation error';\n    console.error('[PrivacyPay] Simulation error details:', errorDetails);\n    throw new Error(`Simulation failed: ${errorDetails}`);\n  }\n\n  // Assemble with simulation results\n  const preparedTx = rpc.assembleTransaction(transaction, simulateResponse).build();\n  console.log('[PrivacyPay] Transaction assembled successfully');\n\n  // Return XDR for Freighter to sign\n  return preparedTx.toXDR();\n}\n\n/**\n * Submit signed transaction to Stellar\n */\nexport async function submitDepositTransaction(signedTxXdr: string): Promise<DepositResult> {\n  try {\n    const rpcServer = new rpc.Server(CONFIG.SOROBAN_RPC_URL);\n\n    // Reconstruct transaction from XDR\n    const transaction = TransactionBuilder.fromXDR(signedTxXdr, CONFIG.NETWORK_PASSPHRASE);\n\n    // Submit\n    const sendResponse = await rpcServer.sendTransaction(transaction);\n\n    if (sendResponse.status === 'ERROR') {\n      return {\n        success: false,\n        error: `Transaction failed: ${JSON.stringify(sendResponse)}`,\n      };\n    }\n\n    // Wait for confirmation\n    let getResponse = await rpcServer.getTransaction(sendResponse.hash);\n    let attempts = 0;\n    const maxAttempts = 30;\n\n    while (\n      getResponse.status === rpc.Api.GetTransactionStatus.NOT_FOUND &&\n      attempts < maxAttempts\n    ) {\n      await new Promise((resolve) => setTimeout(resolve, 1000));\n      getResponse = await rpcServer.getTransaction(sendResponse.hash);\n      attempts++;\n    }\n\n    if (getResponse.status === rpc.Api.GetTransactionStatus.SUCCESS) {\n      return {\n        success: true,\n        txHash: sendResponse.hash,\n      };\n    } else {\n      return {\n        success: false,\n        txHash: sendResponse.hash,\n        error: `Transaction failed with status: ${getResponse.status}`,\n      };\n    }\n  } catch (error: any) {\n    return {\n      success: false,\n      error: error.message,\n    };\n  }\n}\n\n// ============================================================================\n// Withdrawal Functions (API + Encryption)\n// ============================================================================\n\n/**\n * Encrypt recipients payload with Distributor's RSA public key\n * Uses Web Crypto API for browser compatibility\n */\nasync function encryptForDistributor(recipients: Record<string, string>): Promise<string> {\n  let distributorPublicKeyPem = CONFIG.DISTRIBUTOR_RSA_PUBLIC_KEY;\n\n  if (!distributorPublicKeyPem) {\n    throw new Error('Distributor RSA public key not configured');\n  }\n\n  // Handle escaped newlines from env variable\n  distributorPublicKeyPem = distributorPublicKeyPem.replace(/\\\\n/g, '\\n');\n\n  // Parse PEM to get the key\n  const pemContents = distributorPublicKeyPem\n    .replace('-----BEGIN PUBLIC KEY-----', '')\n    .replace('-----END PUBLIC KEY-----', '')\n    .replace(/\\s/g, '');\n\n  const keyData = Uint8Array.from(atob(pemContents), c => c.charCodeAt(0));\n\n  // Import the key\n  const publicKey = await crypto.subtle.importKey(\n    'spki',\n    keyData,\n    {\n      name: 'RSA-OAEP',\n      hash: 'SHA-256',\n    },\n    false,\n    ['encrypt']\n  );\n\n  // Encrypt the payload\n  const payloadStr = JSON.stringify(recipients);\n  const payloadBytes = new TextEncoder().encode(payloadStr);\n\n  const encryptedBuffer = await crypto.subtle.encrypt(\n    {\n      name: 'RSA-OAEP',\n    },\n    publicKey,\n    payloadBytes\n  );\n\n  // Return as base64\n  return btoa(String.fromCharCode(...new Uint8Array(encryptedBuffer)));\n}\n\n/**\n * NaCl box encryption for relayer\n * Uses tweetnacl for proper authenticated encryption\n */\nfunction encryptForRelayer(\n  hashLN: string,\n  totalAmount: number,\n  encryptedD: string,\n  senderPublicKeyBase64: string\n): string {\n  const relayerPublicKeyBase64 = CONFIG.RELAYER_NACL_PUBLIC_KEY;\n\n  if (!relayerPublicKeyBase64) {\n    throw new Error('Relayer NaCl public key not configured');\n  }\n\n  // Decode relayer's public key\n  const relayerPublicKey = decodeBase64(relayerPublicKeyBase64);\n\n  const requestId = crypto.randomUUID();\n  const timestamp = Date.now();\n\n  // Create inner payload\n  const innerPayload = {\n    requestId,\n    hashLN,\n    totalAmount,\n    encryptedD,\n    senderPublicKey: senderPublicKeyBase64,\n    timestamp,\n  };\n\n  // Log the exact payload being sent to relayer\n  console.log('[PrivacyPay Relayer Payload] hashLN in payload:', innerPayload.hashLN);\n  console.log('[PrivacyPay Relayer Payload] Full payload (pre-encryption):', {\n    requestId: innerPayload.requestId,\n    hashLN: innerPayload.hashLN,\n    totalAmount: innerPayload.totalAmount,\n    senderPublicKey: innerPayload.senderPublicKey,\n    timestamp: innerPayload.timestamp,\n  });\n\n  const innerPayloadStr = JSON.stringify(innerPayload);\n  const innerPayloadBytes = new TextEncoder().encode(innerPayloadStr);\n\n  // Generate ephemeral keypair for this request\n  const ephemeralKeypair = nacl.box.keyPair();\n\n  // Generate random nonce\n  const nonce = nacl.randomBytes(nacl.box.nonceLength);\n\n  // Encrypt with NaCl box\n  const encryptedBox = nacl.box(\n    innerPayloadBytes,\n    nonce,\n    relayerPublicKey,\n    ephemeralKeypair.secretKey\n  );\n\n  // Construct wire format: [EphemeralPublicKey(32)] + [Nonce(24)] + [Ciphertext]\n  const wireFormat = new Uint8Array(\n    ephemeralKeypair.publicKey.length + nonce.length + encryptedBox.length\n  );\n  wireFormat.set(ephemeralKeypair.publicKey, 0);\n  wireFormat.set(nonce, ephemeralKeypair.publicKey.length);\n  wireFormat.set(encryptedBox, ephemeralKeypair.publicKey.length + nonce.length);\n\n  return encodeBase64(wireFormat);\n}\n\n/**\n * Submit withdrawal request to Relayer\n */\nexport async function submitWithdrawal(params: WithdrawParams): Promise<WithdrawResult> {\n  try {\n    const { hashLN, recipients, senderRawPublicKey } = params;\n\n    // Log hashLN to verify it matches deposit format exactly\n    console.log('[PrivacyPay Withdraw] hashLN:', hashLN);\n    console.log('[PrivacyPay Withdraw] hashLN type:', typeof hashLN);\n    console.log('[PrivacyPay Withdraw] hashLN length:', hashLN.length);\n\n    // Calculate total amount\n    const totalAmount = Object.values(recipients).reduce(\n      (sum, amt) => sum + parseFloat(amt),\n      0\n    );\n\n    // Encrypt inner layer (for Distributor)\n    const encryptedD = await encryptForDistributor(recipients);\n\n    // Encrypt outer layer (for Relayer)\n    const senderPublicKeyBase64 = encodeBase64(senderRawPublicKey);\n    const encryptedPayload = encryptForRelayer(\n      hashLN,\n      totalAmount,\n      encryptedD,\n      senderPublicKeyBase64\n    );\n\n    // Submit to Relayer\n    const response = await fetch(`${CONFIG.RELAYER_URL}/withdraw`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        payload: encryptedPayload,\n      }),\n    });\n\n    const responseData = await response.json();\n\n    if (!response.ok) {\n      return {\n        success: false,\n        error: `Relayer rejected withdrawal: ${response.status} - ${JSON.stringify(responseData)}`,\n      };\n    }\n\n    return {\n      success: true,\n      requestId: responseData.requestId || responseData.jobId, // Use jobId as requestId if requestId not provided\n      jobId: responseData.jobId,\n      senderIdentity: responseData.senderIdentity,\n    };\n  } catch (error: any) {\n    return {\n      success: false,\n      error: error.message,\n    };\n  }\n}\n\n/**\n * Check job statuses from the Relayer\n */\nexport async function checkJobStatuses(jobIds: string[]): Promise<{\n  jobs: Array<{\n    jobId: string;\n    status: 'pending' | 'processing' | 'completed' | 'failed';\n    txHash?: string;\n  }>;\n}> {\n  try {\n    // Get all statuses (API doesn't support filtering by jobIds)\n    const response = await fetch(`${CONFIG.RELAYER_URL}/status`, {\n      method: 'GET',\n      headers: { 'Content-Type': 'application/json' },\n    });\n\n    if (!response.ok) {\n      throw new Error(`Failed to check job statuses: ${response.status}`);\n    }\n\n    const allJobs = await response.json();\n    \n    // Filter and transform the jobs to match our expected format\n    const matchingJobs = allJobs\n      .filter((job: any) => jobIds.includes(job._id))\n      .map((job: any) => ({\n        jobId: job._id,\n        status: job.status === 'SUCCESS' ? 'completed' as const : \n                job.status === 'PENDING' ? 'pending' as const :\n                job.status === 'PROCESSING' ? 'processing' as const : 'failed' as const,\n        txHash: job.stellarTransactionHash,\n      }));\n\n    return { jobs: matchingJobs };\n  } catch (error: any) {\n    console.error('Error checking job statuses:', error);\n    return { jobs: [] };\n  }\n}\n\n// ============================================================================\n// Session Management (localStorage)\n// ============================================================================\n\nconst STORAGE_KEY = 'tesseract_privacy_pay';\n\n/**\n * Get session for a wallet address\n */\nexport function getSession(walletAddress: string): PrivacyPaySession {\n  if (typeof window === 'undefined') {\n    return { walletAddress, deposits: {}, withdrawals: {} };\n  }\n\n  const stored = localStorage.getItem(STORAGE_KEY);\n  if (!stored) {\n    return { walletAddress, deposits: {}, withdrawals: {} };\n  }\n\n  try {\n    const sessions: Record<string, PrivacyPaySession> = JSON.parse(stored);\n    return sessions[walletAddress] || { walletAddress, deposits: {}, withdrawals: {} };\n  } catch {\n    return { walletAddress, deposits: {}, withdrawals: {} };\n  }\n}\n\n/**\n * Save session for a wallet address\n */\nfunction saveSession(session: PrivacyPaySession): void {\n  if (typeof window === 'undefined') return;\n\n  const stored = localStorage.getItem(STORAGE_KEY);\n  let sessions: Record<string, PrivacyPaySession> = {};\n\n  if (stored) {\n    try {\n      sessions = JSON.parse(stored);\n    } catch {\n      sessions = {};\n    }\n  }\n\n  sessions[session.walletAddress] = session;\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(sessions));\n}\n\n/**\n * Save a deposit to session\n */\nexport function saveDeposit(walletAddress: string, deposit: PrivacyPayDeposit): void {\n  const session = getSession(walletAddress);\n  session.deposits[deposit.hashLN] = deposit;\n  saveSession(session);\n}\n\n/**\n * Get all deposits for a wallet\n */\nexport function getDeposits(walletAddress: string): PrivacyPayDeposit[] {\n  const session = getSession(walletAddress);\n  return Object.values(session.deposits).sort((a, b) => b.timestamp - a.timestamp);\n}\n\n/**\n * Save a withdrawal to session\n */\nexport function saveWithdrawal(walletAddress: string, withdrawal: PrivacyPayWithdrawal): void {\n  const session = getSession(walletAddress);\n  session.withdrawals[withdrawal.requestId] = withdrawal;\n  saveSession(session);\n}\n\n/**\n * Get all withdrawals for a wallet\n */\nexport function getWithdrawals(walletAddress: string): PrivacyPayWithdrawal[] {\n  const session = getSession(walletAddress);\n  return Object.values(session.withdrawals).sort((a, b) => b.timestamp - a.timestamp);\n}\n\n/**\n * Update deposit status\n */\nexport function updateDepositStatus(\n  walletAddress: string,\n  hashLN: string,\n  status: PrivacyPayDeposit['status'],\n  txHash?: string\n): void {\n  const session = getSession(walletAddress);\n  if (session.deposits[hashLN]) {\n    session.deposits[hashLN].status = status;\n    if (txHash) {\n      session.deposits[hashLN].txHash = txHash;\n    }\n    saveSession(session);\n  }\n}\n\n/**\n * Update withdrawal status\n */\nexport function updateWithdrawalStatus(\n  walletAddress: string,\n  requestId: string,\n  status: PrivacyPayWithdrawal['status']\n): void {\n  const session = getSession(walletAddress);\n  if (session.withdrawals[requestId]) {\n    session.withdrawals[requestId].status = status;\n    saveSession(session);\n  }\n}\n\n/**\n * Update withdrawal txHash by jobId\n */\nexport function updateWithdrawalTxHash(\n  walletAddress: string,\n  jobId: string,\n  txHash: string\n): void {\n  const session = getSession(walletAddress);\n  const withdrawal = Object.values(session.withdrawals).find(w => w.jobId === jobId);\n  \n  if (withdrawal) {\n    withdrawal.txHash = txHash;\n    withdrawal.status = 'completed';\n    session.withdrawals[withdrawal.requestId] = withdrawal;\n    saveSession(session);\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1212, "column": 0}, "map": {"version":3,"sources":["file:///Users/kaushalchaudhari/Desktop/Tesseract-Client/tesseract-client/app/privacy-pay/components/DepositForm.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { useWallet } from '@/app/contexts/WalletContext';\nimport {\n  buildDepositTransaction,\n  submitDepositTransaction,\n  generateHashLN,\n  deriveIdentity,\n  getCurrentLedger,\n  generateWalletNonce,\n  saveDeposit,\n  updateDepositStatus,\n} from '@/app/services/privacyPayService';\nimport { signTransaction } from '@stellar/freighter-api';\n\ninterface DepositFormProps {\n  onSuccess?: (txHash: string, hashLN: string) => void;\n}\n\ntype DepositStatus = 'idle' | 'generating' | 'building' | 'signing' | 'submitting' | 'success' | 'error';\n\nexport default function DepositForm({ onSuccess }: DepositFormProps) {\n  const { walletState } = useWallet();\n  const { address, isConnected } = walletState;\n  const [amount, setAmount] = useState('');\n  const [status, setStatus] = useState<DepositStatus>('idle');\n  const [error, setError] = useState<string | null>(null);\n  const [txHash, setTxHash] = useState<string | null>(null);\n  const [generatedHashLN, setGeneratedHashLN] = useState<string | null>(null);\n\n  const handleDeposit = async () => {\n    if (!address || !amount) return;\n\n    const depositAmount = parseFloat(amount);\n    if (isNaN(depositAmount) || depositAmount <= 0) {\n      setError('Please enter a valid amount');\n      return;\n    }\n\n    setError(null);\n    setTxHash(null);\n\n    try {\n      // Step 1: Generate hashLN\n      setStatus('generating');\n      const ledgerNumber = await getCurrentLedger();\n      const walletNonce = generateWalletNonce();\n      const hashLN = await generateHashLN(ledgerNumber, walletNonce);\n      setGeneratedHashLN(hashLN);\n\n      // Derive identity for tracking\n      const identity = await deriveIdentity(hashLN, address);\n\n      // Save pending deposit to session\n      saveDeposit(address, {\n        hashLN,\n        identity,\n        amount: depositAmount,\n        txHash: '',\n        timestamp: Date.now(),\n        status: 'pending',\n      });\n\n      // Step 2: Build transaction\n      setStatus('building');\n      const txXdr = await buildDepositTransaction({\n        depositorAddress: address,\n        hashLN,\n        amount: depositAmount,\n      });\n\n      // Step 3: Sign with Freighter\n      setStatus('signing');\n      const signResult = await signTransaction(txXdr, {\n        networkPassphrase: 'Test SDF Network ; September 2015',\n      });\n\n      if (typeof signResult === 'string') {\n        throw new Error('Signing was cancelled');\n      }\n\n      const signedXdr = signResult.signedTxXdr;\n\n      // Step 4: Submit transaction\n      setStatus('submitting');\n      const result = await submitDepositTransaction(signedXdr);\n\n      if (result.success && result.txHash) {\n        setTxHash(result.txHash);\n        setStatus('success');\n        updateDepositStatus(address, hashLN, 'confirmed', result.txHash);\n        onSuccess?.(result.txHash, hashLN);\n      } else {\n        throw new Error(result.error || 'Transaction failed');\n      }\n    } catch (err: any) {\n      console.error('Deposit error:', err);\n      setError(err.message || 'Deposit failed');\n      setStatus('error');\n      if (generatedHashLN && address) {\n        updateDepositStatus(address, generatedHashLN, 'failed');\n      }\n    }\n  };\n\n  const getStatusMessage = () => {\n    switch (status) {\n      case 'generating':\n        return 'Generating secure hash...';\n      case 'building':\n        return 'Building transaction...';\n      case 'signing':\n        return 'Please sign in Freighter...';\n      case 'submitting':\n        return 'Submitting to Stellar...';\n      case 'success':\n        return 'Deposit successful!';\n      case 'error':\n        return error || 'An error occurred';\n      default:\n        return null;\n    }\n  };\n\n  const isProcessing = ['generating', 'building', 'signing', 'submitting'].includes(status);\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Amount Input */}\n      <div>\n        <label className=\"block text-sm font-medium text-white/60 mb-2\">\n          Deposit Amount (USDC)\n        </label>\n        <div className=\"relative\">\n          <input\n            type=\"number\"\n            value={amount}\n            onChange={(e) => setAmount(e.target.value)}\n            placeholder=\"0.00\"\n            disabled={isProcessing}\n            className=\"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-white/30 focus:outline-none focus:border-blue-500/50 focus:ring-1 focus:ring-blue-500/50 transition-all disabled:opacity-50 disabled:cursor-not-allowed\"\n          />\n          <span className=\"absolute right-4 top-1/2 -translate-y-1/2 text-white/40 text-sm\">\n            USDC\n          </span>\n        </div>\n      </div>\n\n      {/* Info Box */}\n     \n\n      {/* Generated HashLN Display */}\n     \n\n      {/* Status Message */}\n      {getStatusMessage() && (\n        <div\n          className={`flex items-center gap-3 p-4 rounded-xl ${\n            status === 'success'\n              ? 'bg-green-500/10 border border-green-500/20'\n              : status === 'error'\n              ? 'bg-red-500/10 border border-red-500/20'\n              : 'bg-white/5 border border-white/10'\n          }`}\n        >\n          {isProcessing && (\n            <div className=\"w-5 h-5 border-2 border-blue-500 border-t-transparent rounded-full animate-spin\" />\n          )}\n          {status === 'success' && (\n            <svg className=\"w-5 h-5 text-green-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n            </svg>\n          )}\n          {status === 'error' && (\n            <svg className=\"w-5 h-5 text-red-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n            </svg>\n          )}\n          <span\n            className={`text-sm ${\n              status === 'success'\n                ? 'text-green-400'\n                : status === 'error'\n                ? 'text-red-400'\n                : 'text-white/60'\n            }`}\n          >\n            {getStatusMessage()}\n          </span>\n        </div>\n      )}\n\n      {/* Transaction Hash */}\n      {txHash && (\n        <div className=\"bg-white/5 border border-white/10 rounded-xl p-4\">\n          <label className=\"block text-xs font-medium text-white/40 mb-2\">\n            Transaction Hash\n          </label>\n          <a\n            href={`https://stellar.expert/explorer/testnet/tx/${txHash}`}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className=\"font-mono text-sm text-blue-400 hover:text-blue-300 transition-colors break-all\"\n          >\n            {txHash}\n          </a>\n        </div>\n      )}\n\n      {/* Submit Button */}\n      <button\n        onClick={handleDeposit}\n        disabled={!isConnected || !amount || isProcessing}\n        className={`w-full py-4 rounded-xl font-semibold transition-all ${\n          !isConnected || !amount || isProcessing\n            ? 'bg-white/10 text-white/30 cursor-not-allowed'\n            : 'bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 text-white'\n        }`}\n      >\n        {!isConnected\n          ? 'Connect Wallet First'\n          : isProcessing\n          ? getStatusMessage()\n          : 'Deposit to Privacy Pool'}\n      </button>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1483, "column": 0}, "map": {"version":3,"sources":["file:///Users/kaushalchaudhari/Desktop/Tesseract-Client/tesseract-client/app/privacy-pay/components/WithdrawForm.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useRef } from 'react';\nimport { useWallet } from '@/app/contexts/WalletContext';\nimport {\n  submitWithdrawal,\n  saveWithdrawal,\n  getDeposits,\n} from '@/app/services/privacyPayService';\nimport { Keypair } from '@stellar/stellar-sdk';\n\ninterface Recipient {\n  address: string;\n  amount: string;\n}\n\ninterface WithdrawFormProps {\n  onSuccess?: (requestId: string) => void;\n}\n\ntype WithdrawStatus = 'idle' | 'encrypting' | 'submitting' | 'success' | 'error';\ntype InputMode = 'manual' | 'csv';\n\nexport default function WithdrawForm({ onSuccess }: WithdrawFormProps) {\n  const { walletState } = useWallet();\n  const { address, isConnected } = walletState;\n  const [hashLN, setHashLN] = useState('');\n  const [recipients, setRecipients] = useState<Recipient[]>([{ address: '', amount: '' }]);\n  const [status, setStatus] = useState<WithdrawStatus>('idle');\n  const [error, setError] = useState<string | null>(null);\n  const [requestId, setRequestId] = useState<string | null>(null);\n\n  // CSV upload state\n  const [inputMode, setInputMode] = useState<InputMode>('manual');\n  const [csvError, setCsvError] = useState<string | null>(null);\n  const [csvFileName, setCsvFileName] = useState<string | null>(null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  // Get user's deposits for hashLN selection\n  const userDeposits = address ? getDeposits(address) : [];\n\n  // CSV parsing function\n  const parseCSV = (content: string): { recipients: Recipient[]; error?: string } => {\n    const lines = content.trim().split('\\n');\n    const parsedRecipients: Recipient[] = [];\n\n    // Detect and skip header\n    let startLine = 0;\n    const firstLine = lines[0]?.toLowerCase() || '';\n    if (firstLine.includes('address') || firstLine.includes('recipient') || firstLine.includes('amount')) {\n      startLine = 1;\n    }\n\n    for (let i = startLine; i < lines.length; i++) {\n      const line = lines[i].trim();\n      if (!line) continue;\n\n      const parts = line.split(',').map((p) => p.trim());\n      if (parts.length < 2) {\n        return { recipients: [], error: `Invalid format at line ${i + 1}: expected \"address,amount\"` };\n      }\n\n      const addr = parts[0];\n      const amount = parts[1];\n\n      // Validate address\n      if (!addr || addr.length !== 56 || !addr.startsWith('G')) {\n        return { recipients: [], error: `Invalid Stellar address at line ${i + 1}: ${addr}` };\n      }\n\n      // Validate amount\n      const amountNum = parseFloat(amount);\n      if (isNaN(amountNum) || amountNum <= 0) {\n        return { recipients: [], error: `Invalid amount at line ${i + 1}: ${amount}` };\n      }\n\n      parsedRecipients.push({ address: addr, amount });\n    }\n\n    if (parsedRecipients.length === 0) {\n      return { recipients: [], error: 'No valid recipients found in CSV' };\n    }\n\n    if (parsedRecipients.length > 10) {\n      return { recipients: [], error: 'Maximum 10 recipients allowed per withdrawal' };\n    }\n\n    return { recipients: parsedRecipients };\n  };\n\n  // Handle CSV file upload\n  const handleFileUpload = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (!file) return;\n\n    setCsvError(null);\n    setCsvFileName(file.name);\n\n    const reader = new FileReader();\n    reader.onload = (e) => {\n      const content = e.target?.result as string;\n      const result = parseCSV(content);\n\n      if (result.error) {\n        setCsvError(result.error);\n        setRecipients([{ address: '', amount: '' }]);\n      } else {\n        setRecipients(result.recipients);\n        setCsvError(null);\n      }\n    };\n    reader.onerror = () => {\n      setCsvError('Failed to read file');\n    };\n    reader.readAsText(file);\n\n    // Reset file input\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n\n  // Handle mode switch\n  const handleModeSwitch = (mode: InputMode) => {\n    setInputMode(mode);\n    setCsvError(null);\n    setCsvFileName(null);\n    if (mode === 'manual') {\n      setRecipients([{ address: '', amount: '' }]);\n    }\n  };\n\n  // Clear CSV and reset\n  const clearCSV = () => {\n    setRecipients([{ address: '', amount: '' }]);\n    setCsvFileName(null);\n    setCsvError(null);\n  };\n\n  const addRecipient = () => {\n    setRecipients([...recipients, { address: '', amount: '' }]);\n  };\n\n  const removeRecipient = (index: number) => {\n    if (recipients.length > 1) {\n      setRecipients(recipients.filter((_, i) => i !== index));\n    }\n  };\n\n  const updateRecipient = (index: number, field: 'address' | 'amount', value: string) => {\n    const updated = [...recipients];\n    updated[index][field] = value;\n    setRecipients(updated);\n  };\n\n  const getTotalAmount = () => {\n    return recipients.reduce((sum, r) => {\n      const amt = parseFloat(r.amount);\n      return sum + (isNaN(amt) ? 0 : amt);\n    }, 0);\n  };\n\n  const isValidRecipient = (r: Recipient) => {\n    return (\n      r.address.length === 56 &&\n      r.address.startsWith('G') &&\n      !isNaN(parseFloat(r.amount)) &&\n      parseFloat(r.amount) > 0\n    );\n  };\n\n  const allRecipientsValid = recipients.every(isValidRecipient);\n\n  const handleWithdraw = async () => {\n    if (!address || !hashLN || !allRecipientsValid) return;\n\n    setError(null);\n    setRequestId(null);\n\n    try {\n      // Step 1: Prepare recipients map\n      setStatus('encrypting');\n\n      const recipientsMap: Record<string, string> = {};\n      recipients.forEach((r) => {\n        recipientsMap[r.address] = r.amount;\n      });\n\n      // Get raw public key from address (32 bytes)\n      // Note: In a real implementation, you'd need to get this from the wallet\n      // For now, we'll derive it from the Stellar address\n      const rawPublicKey = Keypair.fromPublicKey(address).rawPublicKey();\n\n      // Step 2: Submit withdrawal\n      setStatus('submitting');\n      const result = await submitWithdrawal({\n        hashLN,\n        recipients: recipientsMap,\n        senderPublicKey: address,\n        senderRawPublicKey: rawPublicKey,\n      });\n\n      if (result.success && result.requestId) {\n        setRequestId(result.requestId);\n        setStatus('success');\n\n        // Save withdrawal to session with jobId\n        saveWithdrawal(address, {\n          requestId: result.requestId,\n          jobId: result.jobId,\n          hashLN,\n          totalAmount: getTotalAmount(),\n          recipients: recipientsMap,\n          timestamp: Date.now(),\n          status: 'pending',\n          senderIdentity: result.senderIdentity,\n        });\n\n        onSuccess?.(result.requestId);\n      } else {\n        throw new Error(result.error || 'Withdrawal request failed');\n      }\n    } catch (err: any) {\n      console.error('Withdrawal error:', err);\n      setError(err.message || 'Withdrawal failed');\n      setStatus('error');\n    }\n  };\n\n  const getStatusMessage = () => {\n    switch (status) {\n      case 'encrypting':\n        return 'Encrypting withdrawal request...';\n      case 'submitting':\n        return 'Submitting to relayer...';\n      case 'success':\n        return 'Withdrawal request submitted!';\n      case 'error':\n        return error || 'An error occurred';\n      default:\n        return null;\n    }\n  };\n\n  const isProcessing = ['encrypting', 'submitting'].includes(status);\n\n  return (\n    <div className=\"space-y-6\">\n      {/* HashLN Input/Selection */}\n      <div>\n        <label className=\"block text-sm font-medium text-white/60 mb-2\">\n          Select Deposit  \n        </label>\n        {userDeposits.length > 0 ? (\n          <select\n            value={hashLN}\n            onChange={(e) => setHashLN(e.target.value)}\n            disabled={isProcessing}\n            className=\"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-blue-500/50 focus:ring-1 focus:ring-blue-500/50 transition-all disabled:opacity-50\"\n          >\n            <option value=\"\">Select from your deposits</option>\n            {userDeposits\n              .filter((d) => d.status === 'confirmed')\n              .map((d) => (\n                <option key={d.hashLN} value={d.hashLN}>\n                  {d.hashLN.slice(0, 16)}... ({d.amount} USDC)\n                </option>\n              ))}\n          </select>\n        ) : (\n          <input\n            type=\"text\"\n            value={hashLN}\n            onChange={(e) => setHashLN(e.target.value)}\n            placeholder=\"Enter your deposit hash\"\n            disabled={isProcessing}\n            className=\"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-white/30 focus:outline-none focus:border-blue-500/50 focus:ring-1 focus:ring-blue-500/50 transition-all disabled:opacity-50 font-mono text-sm\"\n          />\n        )}\n       \n      </div>\n\n      {/* Recipients */}\n      <div>\n        <div className=\"flex items-center justify-between mb-3\">\n          <label className=\"block text-sm font-medium text-white/60\">\n            Recipients\n          </label>\n          {/* Mode Toggle */}\n          <div className=\"flex items-center gap-1 p-1 bg-white/5 rounded-lg\">\n            <button\n              onClick={() => handleModeSwitch('manual')}\n              disabled={isProcessing}\n              className={`px-3 py-1.5 text-xs font-medium rounded-md transition-all ${\n                inputMode === 'manual'\n                  ? 'bg-purple-500/20 text-purple-400'\n                  : 'text-white/40 hover:text-white/60'\n              } disabled:opacity-50`}\n            >\n              Manual\n            </button>\n            <button\n              onClick={() => handleModeSwitch('csv')}\n              disabled={isProcessing}\n              className={`px-3 py-1.5 text-xs font-medium rounded-md transition-all ${\n                inputMode === 'csv'\n                  ? 'bg-purple-500/20 text-purple-400'\n                  : 'text-white/40 hover:text-white/60'\n              } disabled:opacity-50`}\n            >\n              CSV Upload\n            </button>\n          </div>\n        </div>\n\n        {/* CSV Upload Mode */}\n        {inputMode === 'csv' && (\n          <div className=\"space-y-3\">\n            {/* Hidden file input */}\n            <input\n              ref={fileInputRef}\n              type=\"file\"\n              accept=\".csv,.txt\"\n              onChange={handleFileUpload}\n              className=\"hidden\"\n            />\n\n            {/* Upload area */}\n            {!csvFileName ? (\n              <button\n                onClick={() => fileInputRef.current?.click()}\n                disabled={isProcessing}\n                className=\"w-full border-2 border-dashed border-white/20 hover:border-purple-500/50 rounded-xl p-6 text-center transition-all disabled:opacity-50\"\n              >\n                <svg className=\"w-8 h-8 mx-auto mb-2 text-white/40\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12\" />\n                </svg>\n                <p className=\"text-sm text-white/60\">Click to upload CSV</p>\n                <p className=\"text-xs text-white/30 mt-1\">Format: address,amount</p>\n              </button>\n            ) : (\n              <div className=\"bg-white/5 border border-white/10 rounded-xl p-4\">\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex items-center gap-3\">\n                    <div className=\"w-10 h-10 bg-purple-500/20 rounded-lg flex items-center justify-center\">\n                      <svg className=\"w-5 h-5 text-purple-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n                      </svg>\n                    </div>\n                    <div>\n                      <p className=\"text-sm font-medium text-white\">{csvFileName}</p>\n                      <p className=\"text-xs text-white/40\">{recipients.filter(r => r.address && r.amount).length} recipients loaded</p>\n                    </div>\n                  </div>\n                  <button\n                    onClick={clearCSV}\n                    disabled={isProcessing}\n                    className=\"p-2 hover:bg-white/10 rounded-lg transition-colors disabled:opacity-50\"\n                  >\n                    <svg className=\"w-4 h-4 text-white/40\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                    </svg>\n                  </button>\n                </div>\n              </div>\n            )}\n\n            {/* CSV Error */}\n            {csvError && (\n              <div className=\"flex items-center gap-2 p-3 bg-red-500/10 border border-red-500/20 rounded-lg\">\n                <svg className=\"w-4 h-4 text-red-400 flex-shrink-0\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                </svg>\n                <span className=\"text-xs text-red-400\">{csvError}</span>\n              </div>\n            )}\n\n            {/* Preview loaded recipients */}\n            {csvFileName && recipients.length > 0 && !csvError && (\n              <div className=\"bg-white/5 border border-white/10 rounded-xl p-3 max-h-48 overflow-y-auto\">\n                <p className=\"text-xs text-white/40 mb-2\">Preview:</p>\n                <div className=\"space-y-1\">\n                  {recipients.slice(0, 5).map((r, i) => (\n                    <div key={i} className=\"flex justify-between text-xs\">\n                      <span className=\"font-mono text-white/60 truncate max-w-[60%]\">{r.address}</span>\n                      <span className=\"text-purple-400\">{r.amount} USDC</span>\n                    </div>\n                  ))}\n                  {recipients.length > 5 && (\n                    <p className=\"text-xs text-white/30 text-center pt-1\">\n                      +{recipients.length - 5} more recipients\n                    </p>\n                  )}\n                </div>\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* Manual Entry Mode */}\n        {inputMode === 'manual' && (\n          <>\n            <div className=\"flex justify-end mb-2\">\n              <button\n                onClick={addRecipient}\n                disabled={isProcessing || recipients.length >= 10}\n                className=\"text-sm text-blue-400 hover:text-blue-300 transition-colors disabled:opacity-50\"\n              >\n                + Add Recipient\n              </button>\n            </div>\n            <div className=\"space-y-3\">\n              {recipients.map((recipient, index) => (\n                <div key={index} className=\"flex gap-3\">\n                  <input\n                    type=\"text\"\n                    value={recipient.address}\n                    onChange={(e) => updateRecipient(index, 'address', e.target.value)}\n                    placeholder=\"G...\"\n                    disabled={isProcessing}\n                    className={`flex-1 bg-white/5 border rounded-xl px-4 py-3 text-white placeholder-white/30 focus:outline-none focus:ring-1 transition-all disabled:opacity-50 font-mono text-sm ${\n                      recipient.address && !recipient.address.startsWith('G')\n                        ? 'border-red-500/50 focus:border-red-500/50 focus:ring-red-500/50'\n                        : 'border-white/10 focus:border-blue-500/50 focus:ring-blue-500/50'\n                    }`}\n                  />\n                  <input\n                    type=\"number\"\n                    value={recipient.amount}\n                    onChange={(e) => updateRecipient(index, 'amount', e.target.value)}\n                    placeholder=\"Amount\"\n                    disabled={isProcessing}\n                    className=\"w-32 bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-white/30 focus:outline-none focus:border-blue-500/50 focus:ring-1 focus:ring-blue-500/50 transition-all disabled:opacity-50\"\n                  />\n                  {recipients.length > 1 && (\n                    <button\n                      onClick={() => removeRecipient(index)}\n                      disabled={isProcessing}\n                      className=\"p-3 hover:bg-white/10 rounded-xl transition-colors disabled:opacity-50\"\n                    >\n                      <svg className=\"w-5 h-5 text-red-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n                      </svg>\n                    </button>\n                  )}\n                </div>\n              ))}\n            </div>\n          </>\n        )}\n      </div>\n\n      {/* Summary */}\n      <div className=\"bg-white/5 border border-white/10 rounded-xl p-4\">\n        <div className=\"flex justify-between items-center\">\n          <span className=\"text-white/60\">Total Withdrawal</span>\n          <span className=\"text-xl font-semibold text-white\">\n            {getTotalAmount().toFixed(2)} USDC\n          </span>\n        </div>\n        <div className=\"flex justify-between items-center mt-2 text-sm\">\n          <span className=\"text-white/40\">Recipients</span>\n          <span className=\"text-white/60\">{recipients.filter(isValidRecipient).length}</span>\n        </div>\n      </div>\n\n      {/* Info Box */}\n      <div className=\"bg-purple-500/10 border border-purple-500/20 rounded-xl p-4\">\n        <div className=\"flex items-start gap-3\">\n          <svg className=\"w-5 h-5 text-purple-400 mt-0.5 flex-shrink-0\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\" />\n          </svg>\n          <div className=\"text-sm text-white/60\">\n            <p className=\"text-purple-400 font-medium mb-1\">Privacy Protection</p>\n            <ul className=\"space-y-1 text-white/50\">\n              <li>Recipients are encrypted end-to-end</li>\n              <li>Relayer cannot see who receives funds</li>\n              <li>Only the Distributor can decrypt recipients</li>\n            </ul>\n          </div>\n        </div>\n      </div>\n\n      {/* Status Message */}\n      {getStatusMessage() && (\n        <div\n          className={`flex items-center gap-3 p-4 rounded-xl ${\n            status === 'success'\n              ? 'bg-green-500/10 border border-green-500/20'\n              : status === 'error'\n              ? 'bg-red-500/10 border border-red-500/20'\n              : 'bg-white/5 border border-white/10'\n          }`}\n        >\n          {isProcessing && (\n            <div className=\"w-5 h-5 border-2 border-purple-500 border-t-transparent rounded-full animate-spin\" />\n          )}\n          {status === 'success' && (\n            <svg className=\"w-5 h-5 text-green-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n            </svg>\n          )}\n          {status === 'error' && (\n            <svg className=\"w-5 h-5 text-red-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n            </svg>\n          )}\n          <span\n            className={`text-sm ${\n              status === 'success'\n                ? 'text-green-400'\n                : status === 'error'\n                ? 'text-red-400'\n                : 'text-white/60'\n            }`}\n          >\n            {getStatusMessage()}\n          </span>\n        </div>\n      )}\n\n      {/* Request ID */}\n      {requestId && (\n        <div className=\"bg-white/5 border border-white/10 rounded-xl p-4\">\n          <label className=\"block text-xs font-medium text-white/40 mb-2\">\n            Request ID\n          </label>\n          <code className=\"font-mono text-sm text-purple-400 break-all\">\n            {requestId}\n          </code>\n        </div>\n      )}\n\n      {/* Submit Button */}\n      <button\n        onClick={handleWithdraw}\n        disabled={!isConnected || !hashLN || !allRecipientsValid || isProcessing}\n        className={`w-full py-4 rounded-xl font-semibold transition-all ${\n          !isConnected || !hashLN || !allRecipientsValid || isProcessing\n            ? 'bg-white/10 text-white/30 cursor-not-allowed'\n            : 'bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white'\n        }`}\n      >\n        {!isConnected\n          ? 'Connect Wallet First'\n          : isProcessing\n          ? getStatusMessage()\n          : 'Submit Private Withdrawal'}\n      </button>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2468, "column": 0}, "map": {"version":3,"sources":["file:///Users/kaushalchaudhari/Desktop/Tesseract-Client/tesseract-client/app/privacy-pay/components/TransactionHistory.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport { useWallet } from '@/app/contexts/WalletContext';\nimport {\n  getDeposits,\n  getWithdrawals,\n  PrivacyPayDeposit,\n  PrivacyPayWithdrawal,\n  checkJobStatuses,\n  updateWithdrawalTxHash,\n} from '@/app/services/privacyPayService';\n\nexport default function TransactionHistory() {\n  const { walletState } = useWallet();\n  const { address } = walletState;\n  const [deposits, setDeposits] = useState<PrivacyPayDeposit[]>([]);\n  const [withdrawals, setWithdrawals] = useState<PrivacyPayWithdrawal[]>([]);\n  const [activeTab, setActiveTab] = useState<'deposits' | 'withdrawals'>('deposits');\n\n  useEffect(() => {\n    if (address) {\n      setDeposits(getDeposits(address));\n      setWithdrawals(getWithdrawals(address));\n    }\n  }, [address,deposits.length,withdrawals.length]);\n\n  // Poll for job statuses every 3 minutes\n  useEffect(() => {\n    if (!address) return;\n\n    const pollInterval = 3 * 60 * 1000; // 3 minutes\n\n    const pollJobs = async () => {\n      // Get pending withdrawals (those without txHash)\n      const pendingWithdrawals = withdrawals.filter(w => w.jobId && !w.txHash);\n      \n      if (pendingWithdrawals.length === 0) return;\n\n      const jobIds = pendingWithdrawals.map(w => w.jobId!);\n      \n      try {\n        const result = await checkJobStatuses(jobIds);\n        \n        // Update withdrawals with new txHashes\n        let updated = false;\n        result.jobs.forEach(job => {\n          if (job.txHash) {\n            updateWithdrawalTxHash(address, job.jobId, job.txHash);\n            updated = true;\n          }\n        });\n\n        // Refresh withdrawals if any were updated\n        if (updated) {\n          setWithdrawals(getWithdrawals(address));\n        }\n      } catch (error) {\n        console.error('Error polling job statuses:', error);\n      }\n    };\n\n    // Poll immediately on mount\n    pollJobs();\n\n    // Set up interval for polling\n    const interval = setInterval(pollJobs, pollInterval);\n    \n    return () => clearInterval(interval);\n  }, [address, withdrawals]);\n\n  const formatDate = (timestamp: number) => {\n    return new Date(timestamp).toLocaleDateString('en-US', {\n      month: 'short',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit',\n    });\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'confirmed':\n      case 'completed':\n        return 'text-green-400 bg-green-400/10';\n      case 'pending':\n      case 'processing':\n        return 'text-yellow-400 bg-yellow-400/10';\n      case 'failed':\n        return 'text-red-400 bg-red-400/10';\n      default:\n        return 'text-white/40 bg-white/10';\n    }\n  };\n\n  if (!address) {\n    return (\n      <div className=\"text-center py-12\">\n        <svg className=\"w-12 h-12 text-white/20 mx-auto mb-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\" />\n        </svg>\n        <p className=\"text-white/40\">Connect wallet to view history</p>\n      </div>\n    );\n  }\n\n  const isEmpty = deposits.length === 0 && withdrawals.length === 0;\n\n  if (isEmpty) {\n    return (\n      <div className=\"text-center py-12\">\n        <svg className=\"w-12 h-12 text-white/20 mx-auto mb-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2\" />\n        </svg>\n        <p className=\"text-white/40\">No transactions yet</p>\n        <p className=\"text-white/30 text-sm mt-1\">Make a deposit to get started</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Tabs */}\n      <div className=\"flex gap-2\">\n        <button\n          onClick={() => setActiveTab('deposits')}\n          className={`px-4 py-2 rounded-lg text-sm font-medium transition-all ${\n            activeTab === 'deposits'\n              ? 'bg-blue-500/20 text-blue-400 border border-blue-500/30'\n              : 'bg-white/5 text-white/60 hover:bg-white/10 border border-transparent'\n          }`}\n        >\n          Deposits ({deposits.length})\n        </button>\n        <button\n          onClick={() => setActiveTab('withdrawals')}\n          className={`px-4 py-2 rounded-lg text-sm font-medium transition-all ${\n            activeTab === 'withdrawals'\n              ? 'bg-purple-500/20 text-purple-400 border border-purple-500/30'\n              : 'bg-white/5 text-white/60 hover:bg-white/10 border border-transparent'\n          }`}\n        >\n          Withdrawals ({withdrawals.length})\n        </button>\n      </div>\n\n      {/* Deposits List */}\n      {activeTab === 'deposits' && (\n        <div className=\"space-y-3\">\n          {deposits.map((deposit) => (\n            <div\n              key={deposit.hashLN}\n              className=\"bg-white/5 border border-white/10 rounded-xl p-4 hover:border-white/20 transition-all\"\n            >\n              <div className=\"flex items-start justify-between mb-3\">\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"w-8 h-8 rounded-lg bg-blue-500/20 flex items-center justify-center\">\n                    <svg className=\"w-4 h-4 text-blue-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 14l-7 7m0 0l-7-7m7 7V3\" />\n                    </svg>\n                  </div>\n                  <div>\n                    <p className=\"text-white font-medium\">{deposit.amount} USDC</p>\n                    <p className=\"text-white/40 text-xs\">{formatDate(deposit.timestamp)}</p>\n                  </div>\n                </div>\n                <span\n                  className={`px-2 py-1 rounded text-xs font-medium ${getStatusColor(\n                    deposit.status\n                  )}`}\n                >\n                  {deposit.status}\n                </span>\n              </div>\n\n              <div className=\"space-y-2 text-sm\">\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-white/40\">Hash</span>\n                  <code className=\"text-white/60 font-mono text-xs\">\n                    {deposit.hashLN.slice(0, 16)}...\n                  </code>\n                </div>\n                {deposit.txHash && (\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-white/40\">Transaction</span>\n                    <a\n                      href={`https://stellar.expert/explorer/testnet/tx/${deposit.txHash}`}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      className=\"text-blue-400 hover:text-blue-300 font-mono text-xs\"\n                    >\n                      {deposit.txHash.slice(0, 8)}...\n                    </a>\n                  </div>\n                )}\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n\n      {/* Withdrawals List */}\n      {activeTab === 'withdrawals' && (\n        <div className=\"space-y-3\">\n          {withdrawals.map((withdrawal) => (\n            <div\n              key={withdrawal.requestId}\n              className=\"bg-white/5 border border-white/10 rounded-xl p-4 hover:border-white/20 transition-all\"\n            >\n              <div className=\"flex items-start justify-between mb-3\">\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"w-8 h-8 rounded-lg bg-purple-500/20 flex items-center justify-center\">\n                    {withdrawal.txHash ? (\n                      <svg className=\"w-4 h-4 text-purple-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                      </svg>\n                    ) : (\n                      <div className=\"w-3 h-3 border-2 border-purple-400 border-t-transparent rounded-full animate-spin\" />\n                    )}\n                  </div>\n                  <div>\n                    <p className=\"text-white font-medium\">{withdrawal.totalAmount} USDC</p>\n                    <p className=\"text-white/40 text-xs\">{formatDate(withdrawal.timestamp)}</p>\n                  </div>\n                </div>\n                <span\n                  className={`px-2 py-1 rounded text-xs font-medium ${getStatusColor(\n                    withdrawal.txHash ? 'completed' : 'pending'\n                  )}`}\n                >\n                  {withdrawal.txHash ? 'completed' : 'pending'}\n                </span>\n              </div>\n\n              <div className=\"space-y-2 text-sm\">\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-white/40\">Recipients</span>\n                  <span className=\"text-white/60\">\n                    {Object.keys(withdrawal.recipients).length}\n                  </span>\n                </div>\n                {withdrawal.jobId && (\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-white/40\">Job ID</span>\n                    <code className=\"text-white/60 font-mono text-xs\">\n                      {withdrawal.jobId.slice(0, 8)}...\n                    </code>\n                  </div>\n                )}\n                {withdrawal.txHash ? (\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-white/40\">Transaction</span>\n                    <a\n                      href={`https://stellar.expert/explorer/testnet/tx/${withdrawal.txHash}`}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      className=\"text-purple-400 hover:text-purple-300 font-mono text-xs flex items-center gap-1\"\n                    >\n                      {withdrawal.txHash.slice(0, 8)}...\n                      <svg className=\"w-3 h-3\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14\" />\n                      </svg>\n                    </a>\n                  </div>\n                ) : (\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-white/40\">Status</span>\n                    <span className=\"text-yellow-400 text-xs flex items-center gap-2\">\n                      <div className=\"w-2 h-2 bg-yellow-400 rounded-full animate-pulse\" />\n                      Processing...\n                    </span>\n                  </div>\n                )}\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3103, "column": 0}, "map": {"version":3,"sources":["file:///Users/kaushalchaudhari/Desktop/Tesseract-Client/tesseract-client/app/privacy-pay/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { WalletProvider, useWallet, ConnectWalletButton } from '@/app/contexts/WalletContext';\nimport { lexendTera } from '@/app/components/Fonts';\nimport DepositForm from './components/DepositForm';\nimport WithdrawForm from './components/WithdrawForm';\nimport TransactionHistory from './components/TransactionHistory';\n\ntype Tab = 'deposit' | 'withdraw';\n\nfunction PrivacyPayContent() {\n  const { walletState, formatAddress } = useWallet();\n  const { isConnected, address, network } = walletState;\n  const [activeTab, setActiveTab] = useState<Tab>('deposit');\n\n  return (\n    <div className=\"min-h-screen bg-black text-white\">\n      {/* Navigation */}\n      <nav className=\"w-full flex items-center justify-between py-6 px-8 md:px-16 fixed top-0 left-0 z-50 backdrop-blur-lg bg-black/60 border-b border-white/5\">\n        <div className=\"flex items-center gap-x-4\">\n          <a href=\"/dashboard\" className=\"flex items-center gap-2 text-white/80 hover:text-white transition-colors\">\n            <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10 19l-7-7m0 0l7-7m-7 7h18\" />\n            </svg>\n            <span className=\"hidden md:inline\">Back</span>\n          </a>\n          <div className=\"h-6 w-px bg-white/20\" />\n          <div className=\"flex items-center gap-2\">\n            <img src=\"/Tess_BW.svg\" alt=\"Tesseract\" className=\"h-6 w-6 rounded\" />\n            <span className={`text-lg font-bold ${lexendTera.className}`}>Privacy Pay</span>\n          </div>\n        </div>\n\n        <div className=\"flex items-center gap-4\">\n          {/* Network Badge */}\n          {network && (\n            <div className=\"hidden md:flex items-center gap-2 px-3 py-1.5 bg-white/5 rounded-full text-xs\">\n              <div className={`w-2 h-2 rounded-full ${network.network === 'TESTNET' ? 'bg-yellow-500' : 'bg-green-500'} animate-pulse`} />\n              <span className=\"text-white/60\">{network.network}</span>\n            </div>\n          )}\n\n          {/* Wallet */}\n          {isConnected && address ? (\n            <div className=\"flex items-center gap-2 px-4 py-2 bg-white/5 rounded-xl border border-white/10\">\n              <div className=\"w-2 h-2 rounded-full bg-green-500\" />\n              <span className=\"font-mono text-sm text-white/80\">{formatAddress(address)}</span>\n            </div>\n          ) : (\n            <ConnectWalletButton />\n          )}\n        </div>\n      </nav>\n\n      {/* Main Content */}\n      <div className=\"pt-24 pb-12 px-4 md:px-8\">\n        <div className=\"max-w-6xl mx-auto\">\n          {/* Header */}\n          <div className=\"text-center mb-12\">\n            <div className=\"inline-flex items-center gap-2 px-4 py-2 bg-purple-500/10 border border-purple-500/20 rounded-full mb-6\">\n              <svg className=\"w-4 h-4 text-purple-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\" />\n              </svg>\n              <span className=\"text-sm text-purple-400\">End-to-End Encrypted</span>\n            </div>\n            <h1 className={`text-4xl md:text-5xl font-bold mb-4 ${lexendTera.className}`}>\n              Privacy Pay\n            </h1>\n            <p className=\"text-white/60 text-lg max-w-2xl mx-auto\">\n              Deposit and withdraw funds with complete privacy. Your transaction details are encrypted and hidden from the public ledger.\n            </p>\n          </div>\n\n          {/* Main Grid */}\n          <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n            {/* Left Column - Forms */}\n            <div className=\"lg:col-span-2 space-y-6\">\n              {/* Tab Switcher */}\n              <div className=\"flex gap-2 p-1 bg-white/5 rounded-xl\">\n                <button\n                  onClick={() => setActiveTab('deposit')}\n                  className={`flex-1 flex items-center justify-center gap-2 py-3 px-4 rounded-lg font-medium transition-all ${\n                    activeTab === 'deposit'\n                      ? 'bg-gradient-to-r from-blue-600 to-blue-500 text-white'\n                      : 'text-white/60 hover:text-white hover:bg-white/5'\n                  }`}\n                >\n                  <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 14l-7 7m0 0l-7-7m7 7V3\" />\n                  </svg>\n                  Deposit\n                </button>\n                <button\n                  onClick={() => setActiveTab('withdraw')}\n                  className={`flex-1 flex items-center justify-center gap-2 py-3 px-4 rounded-lg font-medium transition-all ${\n                    activeTab === 'withdraw'\n                      ? 'bg-gradient-to-r from-purple-600 to-pink-500 text-white'\n                      : 'text-white/60 hover:text-white hover:bg-white/5'\n                  }`}\n                >\n                  <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 10l7-7m0 0l7 7m-7-7v18\" />\n                  </svg>\n                  Withdraw\n                </button>\n              </div>\n\n              {/* Form Card */}\n              <div className=\"bg-black/40 backdrop-blur-lg border border-white/10 rounded-2xl p-6 md:p-8\">\n                {activeTab === 'deposit' ? (\n                  <DepositForm />\n                ) : (\n                  <WithdrawForm />\n                )}\n              </div>\n\n              {/* How It Works */}\n              <div className=\"bg-black/40 backdrop-blur-lg border border-white/10 rounded-2xl p-6\">\n                <h3 className={`text-lg font-semibold mb-4 ${lexendTera.className}`}>\n                  How Privacy Pay Works\n                </h3>\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                  <div className=\"flex flex-col items-center text-center p-4 bg-white/5 rounded-xl\">\n                    <div className=\"w-10 h-10 rounded-full bg-blue-500/20 flex items-center justify-center mb-3\">\n                      <span className=\"text-blue-400 font-bold\">1</span>\n                    </div>\n                    <h4 className=\"font-medium mb-1\">Deposit</h4>\n                    <p className=\"text-sm text-white/50\">\n                      Funds are linked to a unique hash, not your address\n                    </p>\n                  </div>\n                  <div className=\"flex flex-col items-center text-center p-4 bg-white/5 rounded-xl\">\n                    <div className=\"w-10 h-10 rounded-full bg-purple-500/20 flex items-center justify-center mb-3\">\n                      <span className=\"text-purple-400 font-bold\">2</span>\n                    </div>\n                    <h4 className=\"font-medium mb-1\">Encrypt</h4>\n                    <p className=\"text-sm text-white/50\">\n                      Withdrawal details are encrypted end-to-end\n                    </p>\n                  </div>\n                  <div className=\"flex flex-col items-center text-center p-4 bg-white/5 rounded-xl\">\n                    <div className=\"w-10 h-10 rounded-full bg-green-500/20 flex items-center justify-center mb-3\">\n                      <span className=\"text-green-400 font-bold\">3</span>\n                    </div>\n                    <h4 className=\"font-medium mb-1\">Withdraw</h4>\n                    <p className=\"text-sm text-white/50\">\n                      Recipients receive funds privately\n                    </p>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* Right Column - History */}\n            <div className=\"space-y-6\">\n              <div className=\"bg-black/40 backdrop-blur-lg border border-white/10 rounded-2xl p-6\">\n                <h3 className={`text-lg font-semibold mb-4 ${lexendTera.className}`}>\n                  Your Activity\n                </h3>\n                <TransactionHistory />\n              </div>\n\n              {/* Info Card */}\n              <div className=\"bg-gradient-to-br from-blue-900/20 to-purple-900/20 border border-white/10 rounded-2xl p-6\">\n                <div className=\"flex items-start gap-3\">\n                  <div className=\"w-10 h-10 rounded-xl bg-white/10 flex items-center justify-center flex-shrink-0\">\n                    <svg className=\"w-5 h-5 text-white/60\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z\" />\n                    </svg>\n                  </div>\n                  \n                </div>\n              </div>\n\n              {/* Current Limits */}\n              \n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default function PrivacyPayPage() {\n  return (\n    <WalletProvider>\n      <PrivacyPayContent />\n    </WalletProvider>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}